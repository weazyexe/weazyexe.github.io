var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function c(t,e,n,r,i,o,s){const a=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(a){const i=u(e,n,r,s);t.p(i,a)}}const l="undefined"!=typeof window;let h=l?()=>window.performance.now():()=>Date.now(),f=l?t=>requestAnimationFrame(t):t;const p=new Set;function d(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&f(d)}function v(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function _(){return w(" ")}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}const S=new Set;let k,A=0;function x(t,e,n,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const l=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`,f=t.ownerDocument;S.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(b("style")).sheet),d=f.__svelte_rules||(f.__svelte_rules={});d[h]||(d[h]=!0,p.insertRule(`@keyframes ${h} ${l}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${h} ${r}ms linear ${i}ms 1 both`,A+=1,h}function C(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),A-=i,A||f((()=>{A||(S.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),S.clear())})))}function D(t){k=t}const N=[],R=[],O=[],P=[],L=Promise.resolve();let M=!1;function F(t){O.push(t)}let U=!1;const V=new Set;function q(){if(!U){U=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];D(e),j(e.$$)}for(D(null),N.length=0;R.length;)R.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];V.has(e)||(V.add(e),e())}O.length=0}while(N.length);for(;P.length;)P.pop()();M=!1,U=!1,V.clear()}}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}let B;function $(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const K=new Set;let z;function G(){z={r:0,c:[],p:z}}function H(){z.r||i(z.c),z=z.p}function W(t,e){t&&t.i&&(K.delete(t),t.i(e))}function Q(t,e,n,r){if(t&&t.o){if(K.has(t))return;K.add(t),z.c.push((()=>{K.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const X={duration:0};function Y(n,r,s,a){let u=r(n,s),c=a?0:1,l=null,v=null,y=null;function g(){y&&C(n,y)}function m(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:o=0,duration:s=300,easing:a=e,tick:b=t,css:w}=u||X,_={start:h()+o,b:r};r||(_.group=z,z.r+=1),l||v?v=_:(w&&(g(),y=x(n,c,r,s,o,a,w)),r&&b(0,1),l=m(_,s),F((()=>$(n,r,"start"))),function(t){let e;0===p.size&&f(d),new Promise((n=>{p.add(e={c:t,f:n})}))}((t=>{if(v&&t>v.start&&(l=m(v,s),v=null,$(n,l.b,"start"),w&&(g(),y=x(n,c,l.b,l.duration,0,a,u.css))),l)if(t>=l.end)b(c=l.b,1-c),$(n,l.b,"end"),v||(l.b?g():--l.group.r||i(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;c=l.a+l.d*a(e/l.duration),b(c,1-c)}return!(!l&&!v)})))}return{run(t){o(u)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{u=u(),b(t)})):b(t)},end(){g(),l=v=null}}}function J(t){t&&t.c()}function Z(t,e,r,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=t.$$;a&&a.m(e,r),s||F((()=>{const e=u.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]})),l.forEach(F)}function tt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(t,e){-1===t.$$.dirty[0]&&(N.push(t),M||(M=!0,L.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function nt(e,n,o,s,a,u,c=[-1]){const l=k;D(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:r(),dirty:c,skip_bound:!1};let f=!1;if(h.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&et(e,t)),n})):[],h.update(),f=!0,i(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(g)}else h.fragment&&h.fragment.c();n.intro&&W(e.$$.fragment),Z(e,n.target,n.anchor,n.customElement),q()}D(l)}class rt{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function it(e){let n,r,i,o,s;return{c(){n=b("div"),r=b("div"),r.textContent=`made for you ${e[0]}`,i=_(),o=b("a"),s=b("div"),s.textContent="by weazyexe",I(r,"class","pt-5 text"),I(s,"class","medium text sign svelte-1d1mw4g"),I(o,"href",e[1]),I(n,"class","text-center light sign pt-5 pb-5 svelte-1d1mw4g")},m(t,e){y(t,n,e),v(n,r),v(n,i),v(n,o),v(o,s)},p:t,i:t,o:t,d(t){t&&g(n)}}}function ot(t){const e=["üíô","üíñ","üíö","üíõ","ü§™","üë®‚Äçüíª","üåö","üåà","üòé","üëΩ","üê∏","üêä","ü¶ú","ü§ô"];return[e[Math.round(Math.random()*(e.length-1))],window.location.href]}class st extends rt{constructor(t){super(),nt(this,t,ot,it,s,{})}}function at(e){let n,r,i,o,s,a,u,c,l,h;return{c(){n=b("a"),r=b("div"),i=b("div"),o=b("img"),a=_(),u=b("div"),c=b("img"),o.src!==(s=e[0])&&I(o,"src",s),I(o,"alt",e[2]),I(o,"class","image svelte-1ik8zy1"),I(i,"class","default-image svelte-1ik8zy1"),c.src!==(l=e[1])&&I(c,"src",l),I(c,"alt",e[2]),I(c,"class","image svelte-1ik8zy1"),I(u,"class","hover-image svelte-1ik8zy1"),I(r,"class",h="image-box "+e[3]+" svelte-1ik8zy1"),I(n,"href",e[4]),I(n,"target","_blank")},m(t,e){y(t,n,e),v(n,r),v(r,i),v(i,o),v(r,a),v(r,u),v(u,c)},p(t,[e]){1&e&&o.src!==(s=t[0])&&I(o,"src",s),4&e&&I(o,"alt",t[2]),2&e&&c.src!==(l=t[1])&&I(c,"src",l),4&e&&I(c,"alt",t[2]),8&e&&h!==(h="image-box "+t[3]+" svelte-1ik8zy1")&&I(r,"class",h),16&e&&I(n,"href",t[4])},i:t,o:t,d(t){t&&g(n)}}}function ut(t,e,n){let{defaultImage:r}=e,{hoverImage:i}=e,{altText:o}=e,{classes:s=""}=e,{link:a}=e;return t.$$set=t=>{"defaultImage"in t&&n(0,r=t.defaultImage),"hoverImage"in t&&n(1,i=t.hoverImage),"altText"in t&&n(2,o=t.altText),"classes"in t&&n(3,s=t.classes),"link"in t&&n(4,a=t.link)},[r,i,o,s,a]}class ct extends rt{constructor(t){super(),nt(this,t,ut,at,s,{defaultImage:0,hoverImage:1,altText:2,classes:3,link:4})}}function lt(t){let e,n,r,i,o;const s=t[2].default,u=a(s,t,t[1],null);return{c(){e=b("div"),n=w(t[0]),r=_(),i=b("div"),u&&u.c(),I(e,"class","display-4 bold text-center text"),I(i,"class","text-center text")},m(t,s){y(t,e,s),v(e,n),y(t,r,s),y(t,i,s),u&&u.m(i,null),o=!0},p(t,[e]){(!o||1&e)&&T(n,t[0]),u&&u.p&&(!o||2&e)&&c(u,s,t,t[1],e,null,null)},i(t){o||(W(u,t),o=!0)},o(t){Q(u,t),o=!1},d(t){t&&g(e),t&&g(r),t&&g(i),u&&u.d(t)}}}function ht(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:o}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"$$scope"in t&&n(1,i=t.$$scope)},[o,i,r]}class ft extends rt{constructor(t){super(),nt(this,t,ht,lt,s,{title:0})}}function pt(t){let e,n;return{c(){e=w("Android Developer at\n            "),n=b("a"),n.textContent="@surfstudio",I(n,"href","https://surf.ru"),I(n,"target","_blank")},m(t,r){y(t,e,r),y(t,n,r)},d(t){t&&g(e),t&&g(n)}}}function dt(t){let e,n,r,i,o,s,a,u,c,l,h,f,p,d,m,w,T,S;return s=new ft({props:{title:"Timur Zadvornov",$$slots:{default:[pt]},$$scope:{ctx:t}}}),c=new ct({props:{defaultImage:"assets/github.svg",hoverImage:"assets/github-active.svg",altText:"GitHub",link:"https://github.com/weazyexe",classes:"mx-2"}}),h=new ct({props:{defaultImage:"assets/instagram.svg",hoverImage:"assets/instagram-active.svg",altText:"Instagram",link:"https://instagram.com/weazyexe"}}),p=new ct({props:{defaultImage:"assets/twitter.svg",hoverImage:"assets/twitter-active.svg",altText:"Twitter",link:"https://twitter.com/weazyexe",classes:"mx-2"}}),m=new ct({props:{defaultImage:"assets/telegram.svg",hoverImage:"assets/telegram-active.svg",altText:"Telegram",link:"https://t.me/weazyexe"}}),T=new ct({props:{defaultImage:"assets/linkedin.svg",hoverImage:"assets/linkedin-active.svg",altText:"LinkedIn",link:"https://linkedin.com/in/weazyexe",classes:"mx-2"}}),{c(){e=b("div"),n=b("img"),i=_(),o=b("div"),J(s.$$.fragment),a=_(),u=b("div"),J(c.$$.fragment),l=_(),J(h.$$.fragment),f=_(),J(p.$$.fragment),d=_(),J(m.$$.fragment),w=_(),J(T.$$.fragment),n.src!==(r=vt)&&I(n,"src",r),I(n,"alt","Hey, it's me"),I(n,"class","avatar mx-auto svelte-vz4r7h"),I(o,"class","pt-3"),I(u,"class","mt-2 mx-auto"),E(u,"display","table"),I(e,"class","pt-5")},m(t,r){y(t,e,r),v(e,n),v(e,i),v(e,o),Z(s,o,null),v(e,a),v(e,u),Z(c,u,null),v(u,l),Z(h,u,null),v(u,f),Z(p,u,null),v(u,d),Z(m,u,null),v(u,w),Z(T,u,null),S=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n)},i(t){S||(W(s.$$.fragment,t),W(c.$$.fragment,t),W(h.$$.fragment,t),W(p.$$.fragment,t),W(m.$$.fragment,t),W(T.$$.fragment,t),S=!0)},o(t){Q(s.$$.fragment,t),Q(c.$$.fragment,t),Q(h.$$.fragment,t),Q(p.$$.fragment,t),Q(m.$$.fragment,t),Q(T.$$.fragment,t),S=!1},d(t){t&&g(e),tt(s),tt(c),tt(h),tt(p),tt(m),tt(T)}}}const vt="assets/me.jpeg";class yt extends rt{constructor(t){super(),nt(this,t,null,dt,s,{})}}function gt(t){let e,n,r,i,o;const s=t[2].default,u=a(s,t,t[1],null);return{c(){e=b("div"),n=b("div"),r=w(t[0]),i=_(),u&&u.c(),I(n,"class","display-6 title text pb-1 svelte-1ev92d0"),I(e,"class","mx-auto text-container mb-5 svelte-1ev92d0")},m(t,s){y(t,e,s),v(e,n),v(n,r),v(e,i),u&&u.m(e,null),o=!0},p(t,[e]){(!o||1&e)&&T(r,t[0]),u&&u.p&&(!o||2&e)&&c(u,s,t,t[1],e,null,null)},i(t){o||(W(u,t),o=!0)},o(t){Q(u,t),o=!1},d(t){t&&g(e),u&&u.d(t)}}}function mt(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:o}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"$$scope"in t&&n(1,i=t.$$scope)},[o,i,r]}class bt extends rt{constructor(t){super(),nt(this,t,mt,gt,s,{title:0})}}function wt(t){let e;return{c(){e=b("div"),e.innerHTML='My name is <span class="medium">Timur Zadvornov</span>. I‚Äôm\n            <span class="medium">22 years old</span>. Currently living in\n            <span class="medium">Voronezh</span> üá∑üá∫',I(e,"class","body-text text svelte-1r73t9u")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function _t(t){let e;return{c(){e=b("div"),e.innerHTML='I got a <span class="medium">computer science bachelor</span>\n            degree at Vyatka State University. Currently studying for a\n            <span class="medium">master degree</span> at Voronezh State University\n            üéì',I(e,"class","body-text text svelte-1r73t9u")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function It(t){let e;return{c(){e=b("div"),e.innerHTML='Now I‚Äôm working at Surf Studio as an\n            <span class="medium">Android Developer</span>. In the past I was\n            a <span class="medium">frontend developer</span> (React as a main\n            tool, now interested in Svelte) üë®‚Äçüíª',I(e,"class","body-text text svelte-1r73t9u")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function Tt(t){let e,n,r,i,o,s,a;return n=new bt({props:{title:"Summary",$$slots:{default:[wt]},$$scope:{ctx:t}}}),i=new bt({props:{title:"Education",$$slots:{default:[_t]},$$scope:{ctx:t}}}),s=new bt({props:{title:"Career",$$slots:{default:[It]},$$scope:{ctx:t}}}),{c(){e=b("div"),J(n.$$.fragment),r=_(),J(i.$$.fragment),o=_(),J(s.$$.fragment),I(e,"class","mt-5")},m(t,u){y(t,e,u),Z(n,e,null),v(e,r),Z(i,e,null),v(e,o),Z(s,e,null),a=!0},p(t,[e]){const r={};1&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const o={};1&e&&(o.$$scope={dirty:e,ctx:t}),i.$set(o);const a={};1&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a)},i(t){a||(W(n.$$.fragment,t),W(i.$$.fragment,t),W(s.$$.fragment,t),a=!0)},o(t){Q(n.$$.fragment,t),Q(i.$$.fragment,t),Q(s.$$.fragment,t),a=!1},d(t){t&&g(e),tt(n),tt(i),tt(s)}}}class Et extends rt{constructor(t){super(),nt(this,t,null,Tt,s,{})}}function St(t,e,n){const r=t.slice();return r[4]=e[n],r}function kt(t){let e,n;return{c(){e=b("img"),e.src!==(n=t[4])&&I(e,"src",n),I(e,"alt","logo"),I(e,"class","project-tag svelte-11xy9xj")},m(t,n){y(t,e,n)},p(t,r){1&r&&e.src!==(n=t[4])&&I(e,"src",n)},d(t){t&&g(e)}}}function At(e){let n,r,i,o,s,a,u,c,l,h,f,p=e[0].title+"",d=e[0].description+"",E=e[0].stack,S=[];for(let t=0;t<E.length;t+=1)S[t]=kt(St(e,E,t));return{c(){n=b("a"),r=b("h4"),i=w(p),o=_(),s=b("div"),a=w(d),u=_();for(let t=0;t<S.length;t+=1)S[t].c();I(r,"class","h4 mb-0 bold text"),I(s,"class","pb-2 text"),I(n,"class",c="d-block project-card "+e[1]+" svelte-11xy9xj"),I(n,"href",l=e[0].link),I(n,"target","_blank")},m(t,c){y(t,n,c),v(n,r),v(r,i),v(n,o),v(n,s),v(s,a),v(n,u);for(let t=0;t<S.length;t+=1)S[t].m(n,null);var l,p,d,g;h||(l=n,p="click",d=e[3],l.addEventListener(p,d,g),f=()=>l.removeEventListener(p,d,g),h=!0)},p(t,[e]){if(1&e&&p!==(p=t[0].title+"")&&T(i,p),1&e&&d!==(d=t[0].description+"")&&T(a,d),1&e){let r;for(E=t[0].stack,r=0;r<E.length;r+=1){const i=St(t,E,r);S[r]?S[r].p(i,e):(S[r]=kt(i),S[r].c(),S[r].m(n,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=E.length}2&e&&c!==(c="d-block project-card "+t[1]+" svelte-11xy9xj")&&I(n,"class",c),1&e&&l!==(l=t[0].link)&&I(n,"href",l)},i:t,o:t,d(t){t&&g(n),m(S,t),h=!1,f()}}}function xt(t,e,n){let{project:r}=e,{class:i}=e,{onClick:o=(t=>{})}=e;return t.$$set=t=>{"project"in t&&n(0,r=t.project),"class"in t&&n(1,i=t.class),"onClick"in t&&n(2,o=t.onClick)},[r,i,o,()=>o(r)]}class Ct extends rt{constructor(t){super(),nt(this,t,xt,At,s,{project:0,class:1,onClick:2})}}const Dt=/[a-zA-Z]/,Nt=(t,e=0)=>[...Array(t).keys()].map((t=>t+e));function Rt(t,e,n){const r=t.slice();return r[6]=e[n],r}function Ot(t){let e;return{c(){e=b("div"),I(e,"class","dot svelte-14w6xk7"),E(e,"--dotSize",.25*+t[3]+t[1]),E(e,"--color",t[0]),E(e,"animation-delay",t[6]*(+t[5]/10)+t[4])},m(t,n){y(t,e,n)},p(t,n){10&n&&E(e,"--dotSize",.25*+t[3]+t[1]),1&n&&E(e,"--color",t[0])},d(t){t&&g(e)}}}function Pt(e){let n,r=Nt(3,1),i=[];for(let t=0;t<r.length;t+=1)i[t]=Ot(Rt(e,r,t));return{c(){n=b("div");for(let t=0;t<i.length;t+=1)i[t].c();I(n,"class","wrapper svelte-14w6xk7"),E(n,"--size",e[3]+e[1]),E(n,"--duration",e[2])},m(t,e){y(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(59&e){let o;for(r=Nt(3,1),o=0;o<r.length;o+=1){const s=Rt(t,r,o);i[o]?i[o].p(s,e):(i[o]=Ot(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}10&e&&E(n,"--size",t[3]+t[1]),4&e&&E(n,"--duration",t[2])},i:t,o:t,d(t){t&&g(n),m(i,t)}}}function Lt(t,e,n){let{color:r="#FF3E00"}=e,{unit:i="px"}=e,{duration:o="0.6s"}=e,{size:s="60"}=e,a=o.match(Dt)[0],u=o.replace(Dt,"");return t.$$set=t=>{"color"in t&&n(0,r=t.color),"unit"in t&&n(1,i=t.unit),"duration"in t&&n(2,o=t.duration),"size"in t&&n(3,s=t.size)},[r,i,o,s,a,u]}class Mt extends rt{constructor(t){super(),nt(this,t,Lt,Pt,s,{color:0,unit:1,duration:2,size:3})}}function Ft(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function Ut(t,e,n){const r=t.slice();return r[3]=e[n],r}function Vt(t){let e,n;return e=new ft({props:{title:"Projects",$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function qt(t){let e,n;return e=new ft({props:{title:"Projects",$$slots:{default:[Bt]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,r){Z(e,t,r),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function jt(t){let e;return{c(){e=w("All the projects of mine right here, folks ‚ú®")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function Bt(t){let e;return{c(){e=w("Loading, wait a second please ‚è±")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function $t(e){let n,r,i;return{c(){n=b("div"),n.textContent="‚ú® –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—É—â–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∞–∫—É—é –æ—à–∏–±–∫—É ‚ú®",I(n,"class","text-center")},m(t,e){y(t,n,e),i=!0},p:t,i(t){i||(F((()=>{r||(r=Y(n,Ft,{},!0)),r.run(1)})),i=!0)},o(t){r||(r=Y(n,Ft,{},!1)),r.run(0),i=!1},d(t){t&&g(n),t&&r&&r.end()}}}function Kt(e){let n,r,i;return r=new Mt({props:{color:"#b5b5b5",duration:"1s",size:"40"}}),{c(){n=b("div"),J(r.$$.fragment),I(n,"class","d-flex justify-content-center")},m(t,e){y(t,n,e),Z(r,n,null),i=!0},p:t,i(t){i||(W(r.$$.fragment,t),i=!0)},o(t){Q(r.$$.fragment,t),i=!1},d(t){t&&g(n),tt(r)}}}function zt(t){let e,n,r=t[0].data,i=[];for(let e=0;e<r.length;e+=1)i[e]=Ht(Ut(t,r,e));const o=t=>Q(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=w("")},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);y(t,e,r),n=!0},p(t,n){if(3&n){let s;for(r=t[0].data,s=0;s<r.length;s+=1){const o=Ut(t,r,s);i[s]?(i[s].p(o,n),W(i[s],1)):(i[s]=Ht(o),i[s].c(),W(i[s],1),i[s].m(e.parentNode,e))}for(G(),s=r.length;s<i.length;s+=1)o(s);H()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)W(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Q(i[t]);n=!1},d(t){m(i,t),t&&g(e)}}}function Gt(e){let n;return{c(){n=b("div"),n.textContent="Wow, such empty",I(n,"class","text-center")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}function Ht(t){let e,n,r,i,o;return n=new Ct({props:{project:t[3],class:"mx-auto",onClick:t[2]}}),{c(){e=b("div"),J(n.$$.fragment),r=_()},m(t,i){y(t,e,i),Z(n,e,null),v(e,r),o=!0},p(t,e){const r={};1&e&&(r.project=t[3]),2&e&&(r.onClick=t[2]),n.$set(r)},i(t){o||(W(n.$$.fragment,t),F((()=>{i||(i=Y(e,Ft,{},!0)),i.run(1)})),o=!0)},o(t){Q(n.$$.fragment,t),i||(i=Y(e,Ft,{},!1)),i.run(0),o=!1},d(t){t&&g(e),tt(n),t&&i&&i.end()}}}function Wt(t){let e,n,r,i,o,s,a,u;const c=[qt,Vt],l=[];function h(t,e){return t[0].loading?0:1}n=h(t),r=l[n]=c[n](t);const f=[Gt,zt,Kt,$t],p=[];function d(t,e){return t[0].data&&0===t[0].data.length?0:t[0].data?1:t[0].loading?2:3}return s=d(t),a=p[s]=f[s](t),{c(){e=b("div"),r.c(),i=_(),o=b("div"),a.c(),I(o,"class","pt-4"),I(e,"class","pt-5 pb-5")},m(t,r){y(t,e,r),l[n].m(e,null),v(e,i),v(e,o),p[s].m(o,null),u=!0},p(t,[u]){let v=n;n=h(t),n!==v&&(G(),Q(l[v],1,1,(()=>{l[v]=null})),H(),r=l[n],r||(r=l[n]=c[n](t),r.c()),W(r,1),r.m(e,i));let y=s;s=d(t),s===y?p[s].p(t,u):(G(),Q(p[y],1,1,(()=>{p[y]=null})),H(),a=p[s],a?a.p(t,u):(a=p[s]=f[s](t),a.c()),W(a,1),a.m(o,null))},i(t){u||(W(r),W(a),u=!0)},o(t){Q(r),Q(a),u=!1},d(t){t&&g(e),l[n].d(),p[s].d()}}}function Qt(t,e,n){let{projectsStoreData:r}=e,{onProjectClick:i=(t=>{})}=e;return t.$$set=t=>{"projectsStoreData"in t&&n(0,r=t.projectsStoreData),"onProjectClick"in t&&n(1,i=t.onProjectClick)},[r,i,t=>i(t)]}class Xt extends rt{constructor(t){super(),nt(this,t,Qt,Wt,s,{projectsStoreData:0,onProjectClick:1})}}function Yt(t){let e;return{c(){e=w("Just one more thing üôÑ")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function Jt(t){let e;return{c(){e=b("div"),e.innerHTML='I like to design <span class="medium">delightful</span> mobile apps\n            and web pages in Figma. Also I‚Äôm learning\n            <span class="medium">Android development</span>\n            more and more and trying to <span class="medium">explore</span>\n            other dev directions, like\n            <span class="medium">iOS, Web</span>\n            etc. üë®‚Äçüíª\n            <br/>\n            Btw I have meme\n            <a href="https://t.me/weazyexesaved" target="_blank">Telegram channel\n            </a>, so welcome ü§™\n            <br/>\n            At last I have a trade offer for you üçª',I(e,"class","body-text text svelte-1a8hq40")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function Zt(t){let e;return{c(){e=b("div"),e.textContent="If you‚Äôre still reading it, my congratulations! You‚Äôre the best!\n            There is a gift for you ü•á",I(e,"class","body-text text svelte-1a8hq40")},m(t,n){y(t,e,n)},d(t){t&&g(e)}}}function te(t){let e,n,r,i,o,s,a,u,c,l,h,f;return n=new ft({props:{title:"Still reading?",$$slots:{default:[Yt]},$$scope:{ctx:t}}}),o=new bt({props:{title:"Interests",$$slots:{default:[Jt]},$$scope:{ctx:t}}}),c=new bt({props:{title:"At last",$$slots:{default:[Zt]},$$scope:{ctx:t}}}),{c(){e=b("div"),J(n.$$.fragment),r=_(),i=b("div"),J(o.$$.fragment),s=_(),a=b("div"),a.innerHTML='<img src="assets/trade-offer.png" alt="beer?" class="jabu svelte-1a8hq40"/>',u=_(),J(c.$$.fragment),l=_(),h=b("div"),h.innerHTML='<img src="assets/jabu.jpg" alt="¬øjabu?" class="jabu svelte-1a8hq40"/>',I(e,"class","pt-5"),I(a,"class","text-center mb-5"),I(h,"class","text-center"),I(i,"class","mt-5")},m(t,p){y(t,e,p),Z(n,e,null),y(t,r,p),y(t,i,p),Z(o,i,null),v(i,s),v(i,a),v(i,u),Z(c,i,null),v(i,l),v(i,h),f=!0},p(t,[e]){const r={};1&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const i={};1&e&&(i.$$scope={dirty:e,ctx:t}),o.$set(i);const s={};1&e&&(s.$$scope={dirty:e,ctx:t}),c.$set(s)},i(t){f||(W(n.$$.fragment,t),W(o.$$.fragment,t),W(c.$$.fragment,t),f=!0)},o(t){Q(n.$$.fragment,t),Q(o.$$.fragment,t),Q(c.$$.fragment,t),f=!1},d(t){t&&g(e),tt(n),t&&g(r),t&&g(i),tt(o),tt(c)}}}class ee extends rt{constructor(t){super(),nt(this,t,null,te,s,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function re(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ie=function(){return(ie=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function oe(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function se(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ae(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ce(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function he(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=he(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var fe=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function ve(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function ye(){return"indexedDB"in self&&null!=indexedDB}function ge(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function me(){return!(!navigator||!navigator.cookieEnabled)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var be=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,we.prototype.create),o}return re(e,t),e}(Error),we=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?_e(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new be(i,a,r);return u},t}();function _e(t,e){return t.replace(Ie,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Ie=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ee(t,e){var n=new Se(t,e);return n.subscribe.bind(n)}var Se=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ke),void 0===r.error&&(r.error=ke),void 0===r.complete&&(r.complete=ke);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ke(){}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ae(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function xe(t){return t&&t._delegate?t._delegate:t}var Ce=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),De="[DEFAULT]",Ne=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=De);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new fe;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n,r=null!==(e=null==t?void 0:t.identifier)&&void 0!==e?e:De,i=null!==(n=null==t?void 0:t.optional)&&void 0!==n&&n,o=this.normalizeInstanceIdentifier(r);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:De})}catch(t){}try{for(var r=ae(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ue(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=De),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return oe(this,void 0,void 0,(function(){var t;return se(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ce(ce([],ue(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),ue(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=De),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?De:r,o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(i);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var c=ae(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=ue(l.value,2),f=h[0],p=h[1];a===this.normalizeInstanceIdentifier(f)&&p.resolve(u)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(u,a),u},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=ae(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===De?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:De:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Re,Oe=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ne(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Pe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Le,Me=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Le||(Le={}));var Fe,Ue={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Ve=Le.INFO,qe=((Re={})[Le.DEBUG]="log",Re[Le.VERBOSE]="log",Re[Le.INFO]="info",Re[Le.WARN]="warn",Re[Le.ERROR]="error",Re),je=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=qe[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Pe(["["+i+"]  "+t.name+":"],n))}},Be=function(){function t(t){this.name=t,this._logLevel=Ve,this._logHandler=je,this._userLogHandler=null,Me.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Le))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ue[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Pe([this,Le.DEBUG],t)),this._logHandler.apply(this,Pe([this,Le.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Pe([this,Le.VERBOSE],t)),this._logHandler.apply(this,Pe([this,Le.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Pe([this,Le.INFO],t)),this._logHandler.apply(this,Pe([this,Le.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Pe([this,Le.WARN],t)),this._logHandler.apply(this,Pe([this,Le.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Pe([this,Le.ERROR],t)),this._logHandler.apply(this,Pe([this,Le.ERROR],t))},t}();function $e(t){Me.forEach((function(e){e.setLogLevel(t)}))}var Ke,ze=((Fe={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Fe["bad-app-name"]="Illegal App name: '{$appName}",Fe["duplicate-app"]="Firebase App named '{$appName}' already exists",Fe["app-deleted"]="Firebase App named '{$appName}' already deleted",Fe["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Fe["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Fe),Ge=new we("app","Firebase",ze),He="@firebase/app",We="[DEFAULT]",Qe=((Ke={})[He]="fire-core",Ke["@firebase/analytics"]="fire-analytics",Ke["@firebase/app-check"]="fire-app-check",Ke["@firebase/auth"]="fire-auth",Ke["@firebase/database"]="fire-rtdb",Ke["@firebase/functions"]="fire-fn",Ke["@firebase/installations"]="fire-iid",Ke["@firebase/messaging"]="fire-fcm",Ke["@firebase/performance"]="fire-perf",Ke["@firebase/remote-config"]="fire-rc",Ke["@firebase/storage"]="fire-gcs",Ke["@firebase/firestore"]="fire-fst",Ke["fire-js"]="fire-js",Ke["firebase-wrapper"]="fire-js-all",Ke),Xe=new Be("@firebase/app"),Ye=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=he(void 0,t),this.container=new Oe(e.name),this._addComponent(new Ce("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=We),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=We),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Xe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ge.create("app-deleted",{appName:this.name_})},t}();Ye.prototype.name&&Ye.prototype.options||Ye.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Je(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=We);var s=o.name;if("string"!=typeof s||!s)throw Ge.create("bad-app-name",{appName:String(s)});if(Te(e,s))throw Ge.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Qe[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Xe.warn(u.join(" "))}o(new Ce(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:$e,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ge.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ue[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Le[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Me;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.6.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Te(e,t=t||We))throw Ge.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Xe.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Ge.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&he(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ze=function t(){var e=Je(Ye);return e.INTERNAL=ie(ie({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){he(e,t)},createSubscribe:Ee,ErrorFactory:we,deepExtend:he}),e}(),tn=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Xe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var en=self.firebase.SDK_VERSION;en&&en.indexOf("LITE")>=0&&Xe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var nn=Ze.initializeApp;Ze.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return de()&&Xe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),nn.apply(void 0,t)};var rn=Ze;!function(t,e){t.INTERNAL.registerComponent(new Ce("platform-logger",(function(t){return new tn(t)}),"PRIVATE")),t.registerVersion(He,"0.6.24",e),t.registerVersion("fire-js","")}(rn);var on="8.6.5";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
rn.registerVersion("firebase",on,"app"),rn.SDK_VERSION=on;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var sn=function(t,e){return(sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function an(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var un,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ln=ln||{},hn=cn||self;function fn(){}function pn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function dn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var vn="closure_uid_"+(1e9*Math.random()>>>0),yn=0;function gn(t,e,n){return t.call.apply(t.bind,arguments)}function mn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function bn(t,e,n){return(bn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gn:mn).apply(null,arguments)}function wn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _n(){return Date.now()}function In(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Tn(){this.j=this.j,this.i=this.i}Tn.prototype.j=!1,Tn.prototype.ka=function(){var t;!this.j&&(this.j=!0,this.H(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,vn)&&t[vn]||(t[vn]=++yn))},Tn.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var En=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Sn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function kn(t){return Array.prototype.concat.apply([],arguments)}function An(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function xn(t){return/^[\s\xa0]*$/.test(t)}var Cn,Dn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Nn(t,e){return-1!=t.indexOf(e)}function Rn(t,e){return t<e?-1:t>e?1:0}t:{var On=hn.navigator;if(On){var Pn=On.userAgent;if(Pn){Cn=Pn;break t}}Cn=""}function Ln(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Mn(t){var e={};for(var n in t)e[n]=t[n];return e}var Fn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Un(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Fn.length;o++)n=Fn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Vn(t){return Vn[" "](t),t}Vn[" "]=fn;var qn,jn,Bn=Nn(Cn,"Opera"),$n=Nn(Cn,"Trident")||Nn(Cn,"MSIE"),Kn=Nn(Cn,"Edge"),zn=Kn||$n,Gn=Nn(Cn,"Gecko")&&!(Nn(Cn.toLowerCase(),"webkit")&&!Nn(Cn,"Edge"))&&!(Nn(Cn,"Trident")||Nn(Cn,"MSIE"))&&!Nn(Cn,"Edge"),Hn=Nn(Cn.toLowerCase(),"webkit")&&!Nn(Cn,"Edge");function Wn(){var t=hn.document;return t?t.documentMode:void 0}t:{var Qn="",Xn=(jn=Cn,Gn?/rv:([^\);]+)(\)|;)/.exec(jn):Kn?/Edge\/([\d\.]+)/.exec(jn):$n?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jn):Hn?/WebKit\/(\S+)/.exec(jn):Bn?/(?:Version)[ \/]?(\S+)/.exec(jn):void 0);if(Xn&&(Qn=Xn?Xn[1]:""),$n){var Yn=Wn();if(null!=Yn&&Yn>parseFloat(Qn)){qn=String(Yn);break t}}qn=Qn}var Jn,Zn={};function tr(t){return function(t,e){var n=Zn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Dn(String(qn)).split("."),r=Dn(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Rn(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Rn(0==s[2].length,0==a[2].length)||Rn(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(hn.document&&$n){var er=Wn();Jn=er||(parseInt(qn,10)||void 0)}else Jn=void 0;var nr=Jn,rr=!$n||9<=Number(nr),ir=$n&&!tr("9"),or=function(){if(!hn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{hn.addEventListener("test",fn,e),hn.removeEventListener("test",fn,e)}catch(t){}return t}();function sr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ar(t,e){if(sr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Gn){t:{try{Vn(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ur[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}sr.prototype.b=function(){this.defaultPrevented=!0},In(ar,sr);var ur={2:"touch",3:"pen",4:"mouse"};ar.prototype.b=function(){ar.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ir)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var cr="closure_listenable_"+(1e6*Math.random()|0),lr=0;function hr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lr,this.Y=this.Z=!1}function fr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function pr(t){this.src=t,this.a={},this.b=0}function dr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=En(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function vr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}pr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=vr(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new hr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yr="closure_lm_"+(1e6*Math.random()|0),gr={};function mr(t,e,n,r,i){if(r&&r.once)return wr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mr(t,e[o],n,r,i);return null}return n=xr(n),t&&t[cr]?t.wa(e,n,dn(r)?!!r.capture:!!r,i):br(t,e,n,!1,r,i)}function br(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=dn(i)?!!i.capture:!!i;if(s&&!rr)return null;var a=kr(t);if(a||(t[yr]=a=new pr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Sr,e=rr?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)or||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)wr(t,e[o],n,r,i);return null}return n=xr(n),t&&t[cr]?t.xa(e,n,dn(r)?!!r.capture:!!r,i):br(t,e,n,!0,r,i)}function _r(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)_r(t,e[o],n,r,i);else r=dn(r)?!!r.capture:!!r,n=xr(n),t&&t[cr]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=vr(o=t.a[e],n,r,i))&&(fr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=kr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=vr(e,n,r,i)),(n=-1<t?e[t]:null)&&Ir(n))}function Ir(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[cr])dr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kr(e))?(dr(n,t),0==n.b&&(n.src=null,e[yr]=null)):fr(t)}}}function Tr(t){return t in gr?gr[t]:gr[t]="on"+t}function Er(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Ir(t),n.call(r,e)}function Sr(t,e){if(t.Y)return!0;if(!rr){if(!e)t:{e=["window","event"];for(var n=hn,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Er(t,e=new ar(e,this))}return Er(t,new ar(e,this))}function kr(t){return(t=t[yr])instanceof pr?t:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function xr(t){return"function"==typeof t?t:(t[Ar]||(t[Ar]=function(e){return t.handleEvent(e)}),t[Ar])}function Cr(){Tn.call(this),this.c=new pr(this),this.J=this,this.D=null}function Dr(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new sr(e,t);else if(e instanceof sr)e.target=e.target||t;else{var i=e;Un(e=new sr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Nr(s,r,!0,e)&&i}if(i=Nr(s=e.a=t,r,!0,e)&&i,i=Nr(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nr(s=e.a=n[o],r,!1,e)&&i}function Nr(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&dr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}In(Cr,Tn),Cr.prototype[cr]=!0,(un=Cr.prototype).addEventListener=function(t,e,n,r){mr(this,t,e,n,r)},un.removeEventListener=function(t,e,n,r){_r(this,t,e,n,r)},un.H=function(){if(Cr.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fr(n[r]);delete e.a[t],e.b--}}this.D=null},un.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},un.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Rr=hn.JSON.stringify;function Or(){this.b=this.a=null}var Pr,Lr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Fr}),(function(t){t.reset()}));function Mr(){var t=jr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Fr(){this.next=this.b=this.a=null}function Ur(t){hn.setTimeout((function(){throw t}),0)}function Vr(t,e){Pr||function(){var t=hn.Promise.resolve(void 0);Pr=function(){t.then(Br)}}(),qr||(Pr(),qr=!0),jr.add(t,e)}Or.prototype.add=function(t,e){var n=Lr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Fr.prototype.reset=function(){this.next=this.b=this.a=null};var qr=!1,jr=new Or;function Br(){for(var t;t=Mr();){try{t.a.call(t.b)}catch(t){Ur(t)}var e=Lr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}qr=!1}function $r(t,e){Cr.call(this),this.b=t||1,this.a=e||hn,this.f=bn(this.eb,this),this.g=_n()}function Kr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function zr(t,e,n){if("function"==typeof t)n&&(t=bn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=bn(t.handleEvent,t)}return 2147483647<Number(e)?-1:hn.setTimeout(t,e||0)}function Gr(t){t.a=zr((function(){t.a=null,t.c&&(t.c=!1,Gr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}In($r,Cr),(un=$r.prototype).aa=!1,un.M=null,un.eb=function(){if(this.aa){var t=_n()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Dr(this,"tick"),this.aa&&(Kr(this),this.start()))}},un.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_n())},un.H=function(){$r.X.H.call(this),Kr(this),delete this.a};var Hr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Gr(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(hn.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Tn);function Wr(t){Tn.call(this),this.b=t,this.a={}}In(Wr,Tn);var Qr=[];function Xr(t,e,n,r){Array.isArray(n)||(n&&(Qr[0]=n.toString()),n=Qr);for(var i=0;i<n.length;i++){var o=mr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yr(t){Ln(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ir(t)}),t),t.a={}}function Jr(){this.a=!0}function Zr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Rr(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wr.prototype.H=function(){Wr.X.H.call(this),Yr(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jr.prototype.info=function(){};var ti={},ei=null;function ni(){return ei=ei||new Cr}function ri(t){sr.call(this,ti.Ga,t)}function ii(t){var e=ni();Dr(e,new ri(e,t))}function oi(t,e){sr.call(this,ti.STAT_EVENT,t),this.stat=e}function si(t){var e=ni();Dr(e,new oi(e,t))}function ai(t){sr.call(this,ti.Ha,t)}function ui(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return hn.setTimeout((function(){t()}),e)}ti.Ga="serverreachability",In(ri,sr),ti.STAT_EVENT="statevent",In(oi,sr),ti.Ha="timingevent",In(ai,sr);var ci={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},li={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function hi(){}function fi(t){return t.b||(t.b=t.c())}function pi(){}hi.prototype.b=null;var di,vi={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function yi(){sr.call(this,"d")}function gi(){sr.call(this,"c")}function mi(){}function bi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Wr(this),this.P=wi,t=zn?125:void 0,this.R=new $r(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}In(yi,sr),In(gi,sr),In(mi,hi),mi.prototype.a=function(){return new XMLHttpRequest},mi.prototype.c=function(){return{}},di=new mi;var wi=45e3,_i={},Ii={};function Ti(t,e,n){t.G=1,t.i=zi(Vi(e)),t.j=n,t.I=!0,Ei(t,null)}function Ei(t,e){t.u=_n(),Ai(t),t.l=Vi(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),io(n.b,"t",r),t.D=0,t.a=Zo(t.g,t.g.C?e:null),0<t.O&&(t.F=new Hr(bn(t.Da,t,t.a),t.O)),Xr(t.J,t.a,"readystatechange",t.bb),e=t.B?Mn(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ii(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Si(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ki(t,n);if(i==Ii){4==e&&(t.h=4,si(14),r=!1),Zr(t.c,t.f,null,"[Incomplete Response]");break}if(i==_i){t.h=4,si(15),Zr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Zr(t.c,t.f,i,null),Ri(t,i)}4==e&&0==n.length&&(t.h=1,si(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zo(e),e.F=!0,si(11))):(Zr(t.c,t.f,n,"[Invalid Chunked Response]"),Ni(t),Di(t))}function ki(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ii:(n=Number(e.substring(n,r)),isNaN(n)?_i:(r+=1)+n>e.length?Ii:(e=e.substr(r,n),t.D=r+n,e))}function Ai(t){t.T=_n()+t.P,xi(t,t.P)}function xi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ui(bn(t.$a,t),e)}function Ci(t){t.o&&(hn.clearTimeout(t.o),t.o=null)}function Di(t){0==t.g.v||t.A||Wo(t.g,t)}function Ni(t){Ci(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,Kr(t.R),Yr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Ri(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ho(n.b,t)))if(n.I=t.N,!t.C&&ho(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Ho(n),Mo(n)}Ko(n),si(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=ui(bn(n.Xa,n),6e3));if(1>=lo(n.b)&&n.fa){try{n.fa()}catch(t){}n.fa=void 0}}else Xo(n,11)}else if((t.C||n.a==t)&&Ho(n),!xn(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Nn(l,"spdy")||Nn(l,"quic")||Nn(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fo(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,Ki(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=_n()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).ma=Jo(u,u.C?u.ha:null,u.ga),p.C){po(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ci(d),Ai(d)),u.a=p}else $o(u);0<n.g.length&&Vo(n)}else"stop"!=i[0]&&"close"!=i[0]||Xo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Xo(n,7):Lo(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);ii(4)}catch(t){}}function Oi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(pn(t)||"string"==typeof t)Sn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(pn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(pn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pi(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pi)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Li(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mi(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Mi(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(un=bi.prototype).setTimeout=function(t){this.P=t},un.bb=function(t){t=t.target;var e=this.F;e&&3==No(t)?e.f():this.Da(t)},un.Da=function(t){try{if(t==this.a)t:{var e=No(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!zn&&!this.a.$())){this.A||4!=e||7==n||ii(8==n||0>=r?3:2),Ci(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,si(12),Ni(this),Di(this);break t}Zr(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ri(this,u)}this.I?(Si(this,e,o),zn&&this.b&&3==e&&(Xr(this.J,this.R,"tick",this.ab),this.R.start())):(Zr(this.c,this.f,o,null),Ri(this,o)),4==e&&Ni(this),this.b&&!this.A&&(4==e?Wo(this.g,this):(this.b=!1,Ai(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,si(12)):(this.h=0,si(13)),Ni(this),Di(this)}}}catch(t){}},un.ab=function(){if(this.a){var t=No(this.a),e=this.a.$();this.D<e.length&&(Ci(this),Si(this,t,e),this.b&&4!=t&&Ai(this))}},un.cancel=function(){this.A=!0,Ni(this)},un.$a=function(){this.o=null;var t=_n();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.G&&(ii(3),si(17)),Ni(this),this.h=2,Di(this)):xi(this,this.T-t)},(un=Pi.prototype).K=function(){Li(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},un.L=function(){return Li(this),this.a.concat()},un.get=function(t,e){return Mi(this.b,t)?this.b[t]:e},un.set=function(t,e){Mi(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},un.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Fi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ui(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ui){this.a=void 0!==e?e:t.a,qi(this,t.f),this.j=t.j,ji(this,t.c),Bi(this,t.h),this.g=t.g,e=t.b;var n=new to;n.c=e.c,e.a&&(n.a=new Pi(e.a),n.b=e.b),$i(this,n),this.i=t.i}else t&&(n=String(t).match(Fi))?(this.a=!!e,qi(this,n[1]||"",!0),this.j=Gi(n[2]||""),ji(this,n[3]||"",!0),Bi(this,n[4]),this.g=Gi(n[5]||"",!0),$i(this,n[6]||"",!0),this.i=Gi(n[7]||"")):(this.a=!!e,this.b=new to(null,this.a))}function Vi(t){return new Ui(t)}function qi(t,e,n){t.f=n?Gi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ji(t,e,n){t.c=n?Gi(e,!0):e}function Bi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function $i(t,e,n){e instanceof to?(t.b=e,function(t,e){e&&!t.f&&(eo(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(no(this,e),io(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Hi(e,Ji)),t.b=new to(e,t.a))}function Ki(t,e,n){t.b.set(e,n)}function zi(t){return Ki(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_n()).toString(36)),t}function Gi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Wi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ui.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Hi(e,Qi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Hi(e,Qi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hi(n,"/"==n.charAt(0)?Yi:Xi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Hi(n,Zi)),t.join("")};var Qi=/[#\/\?@]/g,Xi=/[#\?:]/g,Yi=/[#\?]/g,Ji=/[#\?@]/g,Zi=/#/g;function to(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function eo(t){t.a||(t.a=new Pi,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function no(t,e){eo(t),e=oo(t,e),Mi(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mi((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Li(t)))}function ro(t,e){return eo(t),e=oo(t,e),Mi(t.a.b,e)}function io(t,e,n){no(t,e),0<n.length&&(t.c=null,t.a.set(oo(t,e),An(n)),t.b+=n.length)}function oo(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(un=to.prototype).add=function(t,e){eo(this),this.c=null,t=oo(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},un.forEach=function(t,e){eo(this),this.a.forEach((function(n,r){Sn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},un.L=function(){eo(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},un.K=function(t){eo(this);var e=[];if("string"==typeof t)ro(this,t)&&(e=kn(e,this.a.get(oo(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=kn(e,t[n])}return e},un.set=function(t,e){return eo(this),this.c=null,ro(this,t=oo(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},un.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},un.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var so=function(t,e){this.b=t,this.a=e};function ao(t){this.g=t||uo,hn.PerformanceNavigationTiming?t=0<(t=hn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(hn.ja&&hn.ja.za&&hn.ja.za()&&hn.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var uo=10;function co(t){return!!t.b||!!t.a&&t.a.size>=t.f}function lo(t){return t.b?1:t.a?t.a.size:0}function ho(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fo(t,e){t.a?t.a.add(e):t.b=e}function po(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function vo(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=an(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return An(t.c)}function yo(){}function go(){this.a=new yo}function mo(t,e,n){var r=n||"";try{Oi(t,(function(t,n){var i=t;dn(t)&&(i=Rr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ao.prototype.cancel=function(){var t,e;if(this.c=vo(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=an(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},yo.prototype.stringify=function(t){return hn.JSON.stringify(t,void 0)},yo.prototype.parse=function(t){return hn.JSON.parse(t,void 0)};var wo=hn.JSON.parse;function _o(t){Cr.call(this),this.headers=new Pi,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Io,this.F=this.G=!1}In(_o,Cr);var Io="",To=/^https?$/i,Eo=["POST","PUT"];function So(t){return"content-type"==t.toLowerCase()}function ko(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ao(t),Co(t)}function Ao(t){t.A||(t.A=!0,Dr(t,"complete"),Dr(t,"error"))}function xo(t){if(t.b&&void 0!==ln&&(!t.u[1]||4!=No(t)||2!=t.W()))if(t.m&&4==No(t))zr(t.Aa,0,t);else if(Dr(t,"readystatechange"),4==No(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(Fi)[1]||null;if(!o&&hn.self&&hn.self.location){var s=hn.self.location.protocol;o=s.substr(0,s.length-1)}i=!To.test(o?o.toLowerCase():"")}e=i}if(e)Dr(t,"complete"),Dr(t,"success");else{t.h=6;try{var a=2<No(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ao(t)}}finally{Co(t)}}}function Co(t,e){if(t.a){Do(t);var n=t.a,r=t.u[0]?fn:null;t.a=null,t.u=null,e||Dr(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Do(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(hn.clearTimeout(t.o),t.o=null)}function No(t){return t.a?t.a.readyState:0}function Ro(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ln(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ki(t,e,n))}function Oo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Po(t){this.qa=0,this.g=[],this.c=new Jr,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Oo("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Oo("baseRetryDelayMs",5e3,t),this.Sa=Oo("retryDelaySeedMs",1e4,t),this.Na=Oo("forwardChannelMaxRetries",2,t),this.na=Oo("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ao(t&&t.concurrentRequestLimit),this.la=new go,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Lo(t){if(Fo(t),3==t.v){var e=t.R++,n=Vi(t.B);Ki(n,"SID",t.J),Ki(n,"RID",e),Ki(n,"TYPE","terminate"),jo(t,n),(e=new bi(t,t.c,e,void 0)).G=2,e.i=zi(Vi(n)),n=!1,hn.navigator&&hn.navigator.sendBeacon&&(n=hn.navigator.sendBeacon(e.i.toString(),"")),!n&&hn.Image&&((new Image).src=e.i,n=!0),n||(e.a=Zo(e.g,null),e.a.ba(e.i)),e.u=_n(),Ai(e)}Yo(t)}function Mo(t){t.a&&(zo(t),t.a.cancel(),t.a=null)}function Fo(t){Mo(t),t.j&&(hn.clearTimeout(t.j),t.j=null),Ho(t),t.b.cancel(),t.h&&("number"==typeof t.h&&hn.clearTimeout(t.h),t.h=null)}function Uo(t,e){t.g.push(new so(t.Pa++,e)),3==t.v&&Vo(t)}function Vo(t){co(t.b)||t.h||(t.h=!0,Vr(t.Ca,t),t.u=0)}function qo(t,e){var n;n=e?e.f:t.R++;var r=Vi(t.B);Ki(r,"SID",t.J),Ki(r,"RID",n),Ki(r,"AID",t.P),jo(t,r),t.i&&t.l&&Ro(r,t.i,t.l),n=new bi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Bo(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),fo(t.b,n),Ti(n,r,e)}function jo(t,e){t.f&&Oi({},(function(t,n){Ki(e,n,t)}))}function Bo(t,e,n){n=Math.min(t.g.length,n);var r=t.f?bn(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{mo(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function $o(t){t.a||t.j||(t.T=1,Vr(t.Ba,t),t.o=0)}function Ko(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ui(bn(t.Ba,t),Qo(t,t.o)),t.o++,!0)}function zo(t){null!=t.s&&(hn.clearTimeout(t.s),t.s=null)}function Go(t){t.a=new bi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Vi(t.ma);Ki(e,"RID","rpc"),Ki(e,"SID",t.J),Ki(e,"CI",t.G?"0":"1"),Ki(e,"AID",t.P),jo(t,e),Ki(e,"TYPE","xmlhttp"),t.i&&t.l&&Ro(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=zi(Vi(e)),n.j=null,n.I=!0,Ei(n,t)}function Ho(t){null!=t.m&&(hn.clearTimeout(t.m),t.m=null)}function Wo(t,e){var n=null;if(t.a==e){Ho(t),zo(t),t.a=null;var r=2}else{if(!ho(t.b,e))return;n=e.s,po(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_n()-e.u;var i=t.u;Dr(r=ni(),new ai(r,n,e,i)),Vo(t)}else $o(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(lo(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=ui(bn(t.Ca,t,e),Qo(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ko(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Xo(t,5);break;case 4:Xo(t,10);break;case 3:Xo(t,6);break;default:Xo(t,2)}}function Qo(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function Xo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=bn(t.cb,t);n||(n=new Ui("//www.google.com/images/cleardot.gif"),hn.location&&"http"==hn.location.protocol||qi(n,"https"),zi(n)),function(t,e){var n=new Jr;if(hn.Image){var r=new Image;r.onload=wn(bo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=wn(bo,n,r,"TestLoadImage: error",!1,e),r.onabort=wn(bo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=wn(bo,n,r,"TestLoadImage: timeout",!1,e),hn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else si(2);t.v=0,t.f&&t.f.sa(e),Yo(t),Fo(t)}function Yo(t){t.v=0,t.I=-1,t.f&&(0==vo(t.b).length&&0==t.g.length||(t.b.c.length=0,An(t.g),t.g.length=0),t.f.ra())}function Jo(t,e,n){var r=function(t){return t instanceof Ui?Vi(t):new Ui(t,void 0)}(n);if(""!=r.c)e&&ji(r,e+"."+r.c),Bi(r,r.h);else{var i=hn.location;r=function(t,e,n,r){var i=new Ui(null,void 0);return t&&qi(i,t),e&&ji(i,e),n&&Bi(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ln(t.V,(function(t,e){Ki(r,e,t)})),e=t.A,n=t.oa,e&&n&&Ki(r,e,n),Ki(r,"VER",t.ia),jo(t,r),r}function Zo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _o(t.Oa)).G=t.C,e}function ts(){}function es(){if($n&&!(10<=Number(nr)))throw Error("Environmental error: no available transport.")}function ns(t,e){Cr.call(this),this.a=new Po(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!xn(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new os(this)}function rs(t){yi.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function is(){gi.call(this),this.status=1}function os(t){this.a=t}function ss(t){this.f=t}function as(t){Cr.call(this),this.u=t,this.h=void 0,this.readyState=us,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(un=_o.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():di.a(),this.u=this.l?fi(this.l):fi(di),this.a.onreadystatechange=bn(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(t){return void ko(this,t)}t=n||"";var i=new Pi(this.headers);r&&Oi(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=So,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=hn.FormData&&t instanceof hn.FormData,!(0<=En(Eo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Do(this),0<this.s&&((this.F=function(t){return $n&&tr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=bn(this.ya,this)):this.o=zr(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(t){ko(this,t)}},un.ya=function(){void 0!==ln&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Dr(this,"timeout"),this.abort(8))},un.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Dr(this,"complete"),Dr(this,"abort"),Co(this))},un.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Co(this,!0)),_o.X.H.call(this)},un.Aa=function(){this.j||(this.B||this.m||this.g?xo(this):this.Za())},un.Za=function(){xo(this)},un.W=function(){try{return 2<No(this)?this.a.status:-1}catch(t){return-1}},un.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},un.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wo(e)}},un.va=function(){return this.h},un.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(un=Po.prototype).ia=8,un.v=1,un.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new bi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Un(r=Mn(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Bo(this,n,e),Ki(i=Vi(this.B),"RID",t),Ki(i,"CVER",22),this.A&&Ki(i,"X-HTTP-Session-Id",this.A),jo(this,i),this.i&&r&&Ro(i,this.i,r),fo(this.b,n),this.Ja&&Ki(i,"TYPE","init"),this.ea?(Ki(i,"$req",e),Ki(i,"SID","null"),n.U=!0,Ti(n,i,null)):Ti(n,i,e),this.v=2}}else 3==this.v&&(t?qo(this,t):0==this.g.length||co(this.b)||qo(this))},un.Ba=function(){if(this.j=null,Go(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ui(bn(this.Ya,this),t)}},un.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,si(10),Mo(this),Go(this))},un.Xa=function(){null!=this.m&&(this.m=null,Mo(this),Ko(this),si(19))},un.cb=function(t){t?(this.c.info("Successfully pinged google.com"),si(2)):(this.c.info("Failed to ping google.com"),si(1))},(un=ts.prototype).ua=function(){},un.ta=function(){},un.sa=function(){},un.ra=function(){},un.Ka=function(){},es.prototype.a=function(t,e){return new ns(t,e)},In(ns,Cr),ns.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;si(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=Jo(t,null,t.ga),Vo(t)},ns.prototype.close=function(){Lo(this.a)},ns.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,Uo(this.a,e)}else this.m?((e={}).__data__=Rr(t),Uo(this.a,e)):Uo(this.a,t)},ns.prototype.H=function(){this.a.f=null,delete this.f,Lo(this.a),delete this.a,ns.X.H.call(this)},In(rs,yi),In(is,gi),In(os,ts),os.prototype.ua=function(){Dr(this.a,"a")},os.prototype.ta=function(t){Dr(this.a,new rs(t))},os.prototype.sa=function(t){Dr(this.a,new is(t))},os.prototype.ra=function(){Dr(this.a,"b")},In(ss,hi),ss.prototype.a=function(){return new as(this.f)},ss.prototype.c=function(t){return function(){return t}}({}),In(as,Cr);var us=0;function cs(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function ls(t){t.readyState=4,t.g=null,t.f=null,t.m=null,hs(t)}function hs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(un=as.prototype).open=function(t,e){if(this.readyState!=us)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,hs(this)},un.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},un.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ls(this)),this.readyState=us},un.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,hs(this)),this.a&&(this.readyState=3,hs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==hn.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,cs(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},un.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?ls(this):hs(this),3==this.readyState&&cs(this)}},un.Va=function(t){this.a&&(this.responseText=t,ls(this))},un.Ua=function(){this.a&&ls(this)},un.ca=function(){this.a&&ls(this)},un.setRequestHeader=function(t,e){this.l.append(t,e)},un.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},un.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(as.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),es.prototype.createWebChannel=es.prototype.a,ns.prototype.send=ns.prototype.l,ns.prototype.open=ns.prototype.h,ns.prototype.close=ns.prototype.close,ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,li.COMPLETE="complete",pi.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",Cr.prototype.listen=Cr.prototype.wa,_o.prototype.listenOnce=_o.prototype.xa,_o.prototype.getLastError=_o.prototype.Ra,_o.prototype.getLastErrorCode=_o.prototype.va,_o.prototype.getStatus=_o.prototype.W,_o.prototype.getResponseJson=_o.prototype.Qa,_o.prototype.getResponseText=_o.prototype.$,_o.prototype.send=_o.prototype.ba;var fs=ci,ps=li,ds=ti,vs=10,ys=11,gs=ss,ms=pi,bs=_o,ws=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ws.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var _s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Is=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return re(e,t),e}(Error),Ts=new Be("@firebase/firestore");function Es(){return Ts.logLevel}function Ss(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ts.logLevel<=Le.DEBUG){var r=e.map(xs);Ts.debug.apply(Ts,ce(["Firestore (8.6.5): "+t],r))}}function ks(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ts.logLevel<=Le.ERROR){var r=e.map(xs);Ts.error.apply(Ts,ce(["Firestore (8.6.5): "+t],r))}}function As(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ts.logLevel<=Le.WARN){var r=e.map(xs);Ts.warn.apply(Ts,ce(["Firestore (8.6.5): "+t],r))}}function xs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.5) INTERNAL ASSERTION FAILED: "+t;throw ks(e),new Error(e)}function Ds(t,e){t||Cs()}function Ns(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Os=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Rs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ps(t,e){return t<e?-1:t>e?1:0}function Ls(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ms(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fs=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Is(_s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Is(_s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Is(_s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Is(_s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ps(this.nanoseconds,t.nanoseconds):Ps(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Us=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Fs(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function js(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bs=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Cs(),void 0===n?n=t.length-e:n>t.length-e&&Cs(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),$s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Is(_s.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Bs),Ks=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ks.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Is(_s.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Is(_s.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Is(_s.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Is(_s.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Bs),Gs=function(){function t(t){this.fields=t,t.sort(zs.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ls(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Hs=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ps(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Hs.EMPTY_BYTE_STRING=new Hs("");var Ws=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(t){if(Ds(!!t),"string"==typeof t){var e=0,n=Ws.exec(t);if(Ds(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xs(t.seconds),nanos:Xs(t.nanos)}}function Xs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ys(t){return"string"==typeof t?Hs.fromBase64String(t):Hs.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Js(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zs(t){var e=t.mapValue.fields.__previous_value__;return Js(e)?Zs(e):e}function ta(t){var e=Qs(t.mapValue.fields.__local_write_time__.timestampValue);return new Fs(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ea(t){return null==t}function na(t){return 0===t&&1/t==-1/0}function ra(t){return"number"==typeof t&&Number.isInteger(t)&&!na(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ia=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t($s.fromString(e))},t.fromName=function(e){return new t($s.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===$s.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return $s.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new $s(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Js(t)?4:10:Cs()}function sa(t,e){var n=oa(t);if(n!==oa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ta(t).isEqual(ta(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Qs(t.timestampValue),r=Qs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ys(t.bytesValue).isEqual(Ys(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Xs(t.geoPointValue.latitude)===Xs(e.geoPointValue.latitude)&&Xs(t.geoPointValue.longitude)===Xs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Xs(t.integerValue)===Xs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Xs(t.doubleValue),r=Xs(e.doubleValue);return n===r?na(n)===na(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ls(t.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Vs(n)!==Vs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sa(n[i],r[i])))return!1;return!0}(t,e);default:return Cs()}}function aa(t,e){return void 0!==(t.values||[]).find((function(t){return sa(t,e)}))}function ua(t,e){var n=oa(t),r=oa(e);if(n!==r)return Ps(n,r);switch(n){case 0:return 0;case 1:return Ps(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Xs(t.integerValue||t.doubleValue),r=Xs(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ca(t.timestampValue,e.timestampValue);case 4:return ca(ta(t),ta(e));case 5:return Ps(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ys(t),r=Ys(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ps(n[i],r[i]);if(0!==o)return o}return Ps(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ps(Xs(t.latitude),Xs(e.latitude));return 0!==n?n:Ps(Xs(t.longitude),Xs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ua(n[i],r[i]);if(o)return o}return Ps(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ps(r[s],o[s]);if(0!==a)return a;var u=ua(n[r[s]],i[o[s]]);if(0!==u)return u}return Ps(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Cs()}}function ca(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ps(t,e);var n=Qs(t),r=Qs(e),i=Ps(n.seconds,r.seconds);return 0!==i?i:Ps(n.nanos,r.nanos)}function la(t){return ha(t)}function ha(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Qs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ys(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ia.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ha(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ha(t.fields[o])}return e+"}"}(t.mapValue):Cs();var e,n}function fa(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function pa(t){return!!t&&"integerValue"in t}function da(t){return!!t&&"arrayValue"in t}function va(t){return!!t&&"nullValue"in t}function ya(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ga(t){return!!t&&"mapValue"in t}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Qs(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ma(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ma(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ba=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ga(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ma(e)},t.prototype.setAll=function(t){var e=this,n=zs.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ma(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ga(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return sa(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ga(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){qs(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ma(this.value))},t}();function wa(t){var e=[];return qs(t.fields,(function(t,n){var r=new zs([t]);if(ga(n)){var i=wa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Gs(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var _a=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Us.min(),ba.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ba.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ba.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ba.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ba.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ia=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ta(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ia(t,e,n,r,i,o,s)}function Ea(t){var e=Ns(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+la(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ea(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fa(e.startAt)),e.endAt&&(n+="|ub:",n+=Fa(e.endAt)),e.h=n}return e.h}function Sa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Va(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!sa(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ja(t.startAt,e.startAt)&&ja(t.endAt,e.endAt)}function ka(t){return ia.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return re(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new xa(t,n,r):"array-contains"===n?new Ra(t,r):"in"===n?new Oa(t,r):"not-in"===n?new Pa(t,r):"array-contains-any"===n?new La(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ca(t,n):new Da(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ua(e,this.value)):null!==e&&oa(this.value)===oa(e)&&this.m(ua(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Cs()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),xa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ia.fromName(r.referenceValue),i}return re(e,t),e.prototype.matches=function(t){var e=ia.comparator(t.key,this.key);return this.m(e)},e}(Aa),Ca=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Na("in",n),r}return re(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Aa),Da=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Na("not-in",n),r}return re(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Aa);function Na(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ia.fromName(t.referenceValue)}))}var Ra=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return re(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return da(e)&&aa(e.arrayValue,this.value)},e}(Aa),Oa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return re(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&aa(this.value.arrayValue,e)},e}(Aa),Pa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return re(e,t),e.prototype.matches=function(t){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!aa(this.value.arrayValue,e)},e}(Aa),La=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return re(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!da(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return aa(e.value.arrayValue,t)}))},e}(Aa),Ma=function(t,e){this.position=t,this.before=e};function Fa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return la(t)})).join(",")}var Ua=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Va(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ia.comparator(ia.fromName(s.referenceValue),n.key):ua(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ja(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sa(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ba=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function $a(t,e,n,r,i,o,s,a){return new Ba(t,e,n,r,i,o,s,a)}function Ka(t){return new Ba(t)}function za(t){return!ea(t.limit)&&"F"===t.limitType}function Ga(t){return!ea(t.limit)&&"L"===t.limitType}function Ha(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Wa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qa(t){return null!==t.collectionGroup}function Xa(t){var e=Ns(t);if(null===e.p){e.p=[];var n=Wa(e),r=Ha(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ua(n)),e.p.push(new Ua(zs.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ua(zs.keyField(),u))}}}return e.p}function Ya(t){var e=Ns(t);if(!e.T)if("F"===e.limitType)e.T=Ta(e.path,e.collectionGroup,Xa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Xa(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ua(o.field,s))}var a=e.endAt?new Ma(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Ma(e.startAt.position,!e.startAt.before):null;e.T=Ta(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Ja(t,e,n){return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Za(t,e){return Sa(Ya(t),Ya(e))&&t.limitType===e.limitType}function tu(t){return Ea(Ya(t))+"|lt:"+t.limitType}function eu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+la(e.value);var e})).join(", ")+"]"),ea(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fa(t.startAt)),t.endAt&&(e+=", endAt: "+Fa(t.endAt)),"Target("+e+")"}(Ya(t))+"; limitType="+t.limitType+")"}function nu(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ia.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qa(t.startAt,Xa(t),e)||t.endAt&&qa(t.endAt,Xa(t),e))}(t,e)}function ru(t){return function(e,n){for(var r=!1,i=0,o=Xa(t);i<o.length;i++){var s=o[i],a=iu(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function iu(t,e,n){var r=t.field.isKeyField()?ia.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ua(r,i):Cs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Cs()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ou(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function su(t){return{integerValue:""+t}}function au(t,e){return ra(e)?su(e):ou(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uu=function(){this._=void 0};function cu(t,e,n){return t instanceof fu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof pu?du(t,e):t instanceof vu?yu(t,e):function(t,e){var n=hu(t,e),r=mu(n)+mu(t.A);return pa(n)&&pa(t.A)?su(r):ou(t.R,r)}(t,e)}function lu(t,e,n){return t instanceof pu?du(t,e):t instanceof vu?yu(t,e):n}function hu(t,e){return t instanceof gu?pa(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e}(uu),pu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return re(e,t),e}(uu);function du(t,e){for(var n=bu(e),r=function(t){n.some((function(e){return sa(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var vu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return re(e,t),e}(uu);function yu(t,e){for(var n=bu(e),r=function(t){n=n.filter((function(e){return!sa(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return re(e,t),e}(uu);function mu(t){return Xs(t.integerValue||t.doubleValue)}function bu(t){return da(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wu=function(t,e){this.field=t,this.transform=e},_u=function(t,e){this.version=t,this.transformResults=e},Iu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Tu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Eu=function(){};function Su(t,e,n){t instanceof Du?function(t,e,n){var r=t.value.clone(),i=Ou(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Nu?function(t,e,n){if(Tu(t.precondition,e)){var r=Ou(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ru(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ku(t,e,n){t instanceof Du?function(t,e,n){if(Tu(t.precondition,e)){var r=t.value.clone(),i=Pu(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Cu(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Nu?function(t,e,n){if(Tu(t.precondition,e)){var r=Pu(t.fieldTransforms,n,e),i=e.data;i.setAll(Ru(t)),i.setAll(r),e.convertToFoundDocument(Cu(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Tu(t.precondition,e)&&e.convertToNoDocument(Us.min())}(t,e)}function Au(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=hu(o.transform,s||null);null!=a&&(null==n&&(n=ba.empty()),n.set(o.field,a))}return n||null}function xu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ls(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof pu&&e instanceof pu||t instanceof vu&&e instanceof vu?Ls(t.elements,e.elements,sa):t instanceof gu&&e instanceof gu?sa(t.A,e.A):t instanceof fu&&e instanceof fu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Cu(t){return t.isFoundDocument()?t.version:Us.min()}var Du=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return re(e,t),e}(Eu),Nu=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return re(e,t),e}(Eu);function Ru(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ou(t,e,n){var r=new Map;Ds(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,lu(s,a,n[i]))}return r}function Pu(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,cu(a,u,e))}return r}var Lu,Mu,Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return re(e,t),e}(Eu),Uu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return re(e,t),e}(Eu),Vu=function(t){this.count=t};function qu(t){switch(t){case _s.OK:return Cs();case _s.CANCELLED:case _s.UNKNOWN:case _s.DEADLINE_EXCEEDED:case _s.RESOURCE_EXHAUSTED:case _s.INTERNAL:case _s.UNAVAILABLE:case _s.UNAUTHENTICATED:return!1;case _s.INVALID_ARGUMENT:case _s.NOT_FOUND:case _s.ALREADY_EXISTS:case _s.PERMISSION_DENIED:case _s.FAILED_PRECONDITION:case _s.ABORTED:case _s.OUT_OF_RANGE:case _s.UNIMPLEMENTED:case _s.DATA_LOSS:return!0;default:return Cs()}}function ju(t){if(void 0===t)return ks("GRPC error has no .code"),_s.UNKNOWN;switch(t){case Lu.OK:return _s.OK;case Lu.CANCELLED:return _s.CANCELLED;case Lu.UNKNOWN:return _s.UNKNOWN;case Lu.DEADLINE_EXCEEDED:return _s.DEADLINE_EXCEEDED;case Lu.RESOURCE_EXHAUSTED:return _s.RESOURCE_EXHAUSTED;case Lu.INTERNAL:return _s.INTERNAL;case Lu.UNAVAILABLE:return _s.UNAVAILABLE;case Lu.UNAUTHENTICATED:return _s.UNAUTHENTICATED;case Lu.INVALID_ARGUMENT:return _s.INVALID_ARGUMENT;case Lu.NOT_FOUND:return _s.NOT_FOUND;case Lu.ALREADY_EXISTS:return _s.ALREADY_EXISTS;case Lu.PERMISSION_DENIED:return _s.PERMISSION_DENIED;case Lu.FAILED_PRECONDITION:return _s.FAILED_PRECONDITION;case Lu.ABORTED:return _s.ABORTED;case Lu.OUT_OF_RANGE:return _s.OUT_OF_RANGE;case Lu.UNIMPLEMENTED:return _s.UNIMPLEMENTED;case Lu.DATA_LOSS:return _s.DATA_LOSS;default:return Cs()}}(Mu=Lu||(Lu={}))[Mu.OK=0]="OK",Mu[Mu.CANCELLED=1]="CANCELLED",Mu[Mu.UNKNOWN=2]="UNKNOWN",Mu[Mu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mu[Mu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mu[Mu.NOT_FOUND=5]="NOT_FOUND",Mu[Mu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mu[Mu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mu[Mu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mu[Mu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mu[Mu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mu[Mu.ABORTED=10]="ABORTED",Mu[Mu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mu[Mu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mu[Mu.INTERNAL=13]="INTERNAL",Mu[Mu.UNAVAILABLE=14]="UNAVAILABLE",Mu[Mu.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Bu=function(){function t(t,e){this.comparator=t,this.root=e||Ku.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ku.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ku.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new $u(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new $u(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new $u(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new $u(this.root,t,this.comparator,!0)},t}(),$u=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ku=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Cs();if(this.right.isRed())throw Cs();var t=this.left.check();if(t!==this.right.check())throw Cs();return t+(this.isRed()?0:1)},t}();Ku.EMPTY=null,Ku.RED=!0,Ku.BLACK=!1,Ku.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Cs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Cs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ku(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var zu=function(){function t(t){this.comparator=t,this.data=new Bu(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Gu(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Gu(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Gu=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Hu=new Bu(ia.comparator);function Wu(){return Hu}var Qu=new Bu(ia.comparator);function Xu(){return Qu}var Yu=new Bu(ia.comparator);var Ju=new zu(ia.comparator);function Zu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ju,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var tc=new zu(Ps);function ec(){return tc}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nc=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Us.min(),r,ec(),Wu(),Zu())},t}(),rc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Hs.EMPTY_BYTE_STRING,n,Zu(),Zu(),Zu())},t}(),ic=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},oc=function(t,e){this.targetId=t,this.V=e},sc=function(t,e,n,r){void 0===n&&(n=Hs.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ac=function(){function t(){this.S=0,this.D=lc(),this.C=Hs.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Zu(),e=Zu(),n=Zu();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Cs()}})),new rc(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=lc()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),uc=function(){function t(t){this.W=t,this.G=new Map,this.H=Wu(),this.J=cc(),this.Y=new zu(Ps)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Cs()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ka(i))if(0===n){var o=new ia(i.path);this.tt(e,o,_a.newNoDocument(o,Us.min()))}else Ds(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ka(o.target)){var s=new ia(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,_a.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Zu();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new nc(t,n,this.Y,this.H,r);return this.H=Wu(),this.J=cc(),this.Y=new zu(Ps),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ac,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new zu(Ps),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ss("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ac),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function cc(){return new Bu(ia.comparator)}function lc(){return new Bu(ia.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hc={asc:"ASCENDING",desc:"DESCENDING"},fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pc=function(t,e){this.databaseId=t,this.I=e};function dc(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function vc(t,e){return t.I?e.toBase64():e.toUint8Array()}function yc(t,e){return dc(t,e.toTimestamp())}function gc(t){return Ds(!!t),Us.fromTimestamp(function(t){var e=Qs(t);return new Fs(e.seconds,e.nanos)}(t))}function mc(t,e){return function(t){return new $s(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function bc(t){var e=$s.fromString(t);return Ds(Bc(e)),e}function wc(t,e){return mc(t.databaseId,e.path)}function _c(t,e){var n=bc(e);if(n.get(1)!==t.databaseId.projectId)throw new Is(_s.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Is(_s.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ia(Sc(n))}function Ic(t,e){return mc(t.databaseId,e)}function Tc(t){var e=bc(t);return 4===e.length?$s.emptyPath():Sc(e)}function Ec(t){return new $s(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sc(t){return Ds(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function kc(t,e,n){return{name:wc(t,e),fields:n.value.mapValue.fields}}function Ac(t,e){var n;if(e instanceof Du)n={update:kc(t,e.key,e.value)};else if(e instanceof Fu)n={delete:wc(t,e.key)};else if(e instanceof Nu)n={update:kc(t,e.key,e.data),updateMask:jc(e.fieldMask)};else{if(!(e instanceof Uu))return Cs();n={verify:wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof fu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gu)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Cs()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:yc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Cs()}(t,e.precondition)),n}function xc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Iu.updateTime(gc(t.updateTime)):void 0!==t.exists?Iu.exists(t.exists):Iu.none()}(e.currentDocument):Iu.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ds("REQUEST_TIME"===e.setToServerValue),n=new fu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new pu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new vu(i)}else"increment"in e?n=new gu(t,e.increment):Cs();var o=zs.fromServerFormat(e.fieldPath);return new wu(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=_c(t,e.update.name),o=new ba({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Gs(e.map((function(t){return zs.fromServerFormat(t)})))}(e.updateMask);return new Nu(i,o,s,n,r)}return new Du(i,o,n,r)}if(e.delete){var a=_c(t,e.delete);return new Fu(a,n)}if(e.verify){var u=_c(t,e.verify);return new Uu(u,n)}return Cs()}function Cc(t,e){return{documents:[Ic(t,e.path)]}}function Dc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ic(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ic(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ya(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NAN"}};if(va(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ya(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NAN"}};if(va(t.value))return{unaryFilter:{field:Fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fc(t.field),op:Mc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Fc(t.field),direction:Lc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ea(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Oc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Oc(e.endAt)),n}function Nc(t){var e=Tc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ds(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Rc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ua(Uc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ea(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Pc(n.startAt));var l=null;return n.endAt&&(l=Pc(n.endAt)),$a(e,i,a,s,u,"F",c,l)}function Rc(t){return t?void 0!==t.unaryFilter?[qc(t)]:void 0!==t.fieldFilter?[Vc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Rc(t)})).reduce((function(t,e){return t.concat(e)})):Cs():[]}function Oc(t){return{before:t.before,values:t.position}}function Pc(t){var e=!!t.before,n=t.values||[];return new Ma(n,e)}function Lc(t){return hc[t]}function Mc(t){return fc[t]}function Fc(t){return{fieldPath:t.canonicalString()}}function Uc(t){return zs.fromServerFormat(t.fieldPath)}function Vc(t){return Aa.create(Uc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Cs()}}(t.fieldFilter.op),t.fieldFilter.value)}function qc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Uc(t.unaryFilter.field);return Aa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Uc(t.unaryFilter.field);return Aa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Uc(t.unaryFilter.field);return Aa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Uc(t.unaryFilter.field);return Aa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Cs()}}function jc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Bc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $c(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=zc(e)),e=Kc(t.get(n),e);return zc(e)}function Kc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function zc(t){return t+""}function Gc(t){var e=t.length;if(Ds(e>=2),2===e)return Ds(""===t.charAt(0)&&""===t.charAt(1)),$s.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Cs(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Cs()}o=s+2}return new $s(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hc=function(t,e){this.seconds=t,this.nanoseconds=e},Wc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Wc.store="owner",Wc.key="owner";var Qc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Qc.store="mutationQueues",Qc.keyPath="userId";var Xc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Xc.store="mutations",Xc.keyPath="batchId",Xc.userMutationsIndex="userMutationsIndex",Xc.userMutationsKeyPath=["userId","batchId"];var Yc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,$c(e)]},t.key=function(t,e,n){return[t,$c(e),n]},t}();Yc.store="documentMutations",Yc.PLACEHOLDER=new Yc;var Jc=function(t,e){this.path=t,this.readTime=e},Zc=function(t,e){this.path=t,this.version=e},tl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};tl.store="remoteDocuments",tl.readTimeIndex="readTimeIndex",tl.readTimeIndexPath="readTime",tl.collectionReadTimeIndex="collectionReadTimeIndex",tl.collectionReadTimeIndexPath=["parentPath","readTime"];var el=function(t){this.byteSize=t};el.store="remoteDocumentGlobal",el.key="remoteDocumentGlobalKey";var nl=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};nl.store="targets",nl.keyPath="targetId",nl.queryTargetsIndexName="queryTargetsIndex",nl.queryTargetsKeyPath=["canonicalId","targetId"];var rl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};rl.store="targetDocuments",rl.keyPath=["targetId","path"],rl.documentTargetsIndex="documentTargetsIndex",rl.documentTargetsKeyPath=["path","targetId"];var il=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};il.key="targetGlobalKey",il.store="targetGlobal";var ol=function(t,e){this.collectionId=t,this.parent=e};ol.store="collectionParents",ol.keyPath=["collectionId","parent"];var sl=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};sl.store="clientMetadata",sl.keyPath="clientId";var al=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};al.store="bundles",al.keyPath="bundleId";var ul=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ul.store="namedQueries",ul.keyPath="name";var cl=ce(ce([],ce(ce([],ce(ce([],ce(ce([],[Qc.store,Xc.store,Yc.store,tl.store,nl.store,Wc.store,il.store,rl.store]),[sl.store])),[el.store])),[ol.store])),[al.store,ul.store]),ll="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hl=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),fl=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},pl=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Cs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),dl=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new fl,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new gl(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Il(e.target.error);n.ft.reject(new gl(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new gl(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ss("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new bl(e)},t}(),vl=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(pe())&&ks("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ss("SimpleDb","Removing database:",t),wl(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=pe(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return oe(this,void 0,void 0,(function(){var e,n=this;return se(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ss("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new gl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Is(_s.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new gl(t,n))},i.onupgradeneeded=function(t){Ss("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ss("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o,s,a,u;return se(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return se(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=dl.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),pl.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ss("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),yl=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return wl(this.Pt.delete())},t}(),gl=function(t){function e(e,n){var r=this;return(r=t.call(this,_s.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return re(e,t),e}(Is);function ml(t){return"IndexedDbTransactionError"===t.name}var bl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ss("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ss("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),wl(n)},t.prototype.add=function(t){return Ss("SimpleDb","ADD",this.store.name,t,t),wl(this.store.add(t))},t.prototype.get=function(t){var e=this;return wl(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ss("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ss("SimpleDb","DELETE",this.store.name,t),wl(this.store.delete(t))},t.prototype.count=function(){return Ss("SimpleDb","COUNT",this.store.name),wl(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Ss("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new pl((function(n,r){e.onerror=function(t){var e=Il(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new pl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new yl(i),s=e(i.primaryKey,i.value,o);if(s instanceof pl){var a=s.catch((function(t){return o.done(),pl.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return pl.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function wl(t){return new pl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Il(t.target.error);n(e)}}))}var _l=!1;function Il(t){var e=vl._t(pe());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Is("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return _l||(_l=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return re(e,t),e}(hl);function El(t,e){var n=Ns(t);return vl.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Sl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Su(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ku(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ku(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Us.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Zu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ls(this.mutations,t.mutations,(function(t,e){return xu(t,e)}))&&Ls(this.baseMutations,t.baseMutations,(function(t,e){return xu(t,e)}))},t}(),kl=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ds(e.mutations.length===r.length);for(var i=Yu,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Al=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Us.min()),void 0===o&&(o=Us.min()),void 0===s&&(s=Hs.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),xl=function(t){this.Lt=t};function Cl(t,e){if(e.document)return function(t,e,n){var r=_c(t,e.name),i=gc(e.updateTime),o=new ba({mapValue:{fields:e.fields}}),s=_a.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ia.fromSegments(e.noDocument.path),r=Pl(e.noDocument.readTime),i=_a.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ia.fromSegments(e.unknownDocument.path);return r=Pl(e.unknownDocument.version),_a.newUnknownDocument(o,r)}return Cs()}function Dl(t,e,n){var r=Nl(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:wc(t,e.key),fields:e.data.value.mapValue.fields,updateTime:dc(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new tl(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ol(e.version);return s=e.hasCommittedMutations,new tl(null,new Jc(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ol(e.version);return new tl(new Zc(c,l),null,null,!0,r,i)}return Cs()}function Nl(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Rl(t){var e=new Fs(t[0],t[1]);return Us.fromTimestamp(e)}function Ol(t){var e=t.toTimestamp();return new Hc(e.seconds,e.nanoseconds)}function Pl(t){var e=new Fs(t.seconds,t.nanoseconds);return Us.fromTimestamp(e)}function Ll(t,e){for(var n=(e.baseMutations||[]).map((function(e){return xc(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return xc(t.Lt,e)})),a=Fs.fromMillis(e.localWriteTimeMs);return new Sl(e.batchId,a,n,s)}function Ml(t){var e,n,r=Pl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Pl(t.lastLimboFreeSnapshotVersion):Us.min();return void 0!==t.query.documents?(Ds(1===(n=t.query).documents.length),e=Ya(Ka(Tc(n.documents[0])))):e=function(t){return Ya(Nc(t))}(t.query),new Al(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Hs.fromBase64String(t.resumeToken))}function Fl(t,e){var n,r=Ol(e.snapshotVersion),i=Ol(e.lastLimboFreeSnapshotVersion);n=ka(e.target)?Cc(t.Lt,e.target):Dc(t.Lt,e.target);var o=e.resumeToken.toBase64();return new nl(e.targetId,Ea(e.target),r,o,e.sequenceNumber,i,n)}function Ul(t){var e=Nc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ja(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vl=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ql(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Pl(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return ql(t).put({bundleId:(n=e).id,createTime:Ol(gc(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return jl(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ul(e.bundledQuery),readTime:Pl(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return jl(t).put(function(t){return{name:t.name,readTime:Ol(gc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ql(t){return El(t,al.store)}function jl(t){return El(t,ul.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bl=function(){function t(){this.Bt=new $l}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),pl.resolve()},t.prototype.getCollectionParents=function(t,e){return pl.resolve(this.Bt.getEntries(e))},t}(),$l=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new zu($s.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new zu($s.comparator)).toArray()},t}(),Kl=function(){function t(){this.qt=new $l}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:$c(i)};return zl(t).put(o)}return pl.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ms(e),""],!1,!0);return zl(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Gc(o.parent))}return n}))},t}();function zl(t){return El(t,ol.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hl=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wl(t,e,n){var r=t.store(Xc.store),i=t.store(Yc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ds(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Yc.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return pl.waitFor(o).next((function(){return c}))}function Ql(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Cs();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Hl.DEFAULT_COLLECTION_PERCENTILE=10,Hl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hl.DEFAULT=new Hl(41943040,Hl.DEFAULT_COLLECTION_PERCENTILE,Hl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hl.DISABLED=new Hl(-1,0,0);var Xl=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Ds(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jl(t).$t({index:Xc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Zl(t),s=Jl(t);return s.add({}).next((function(a){Ds("number"==typeof a);for(var u=new Sl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ac(t.Lt,e)})),i=n.mutations.map((function(e){return Ac(t.Lt,e)}));return new Xc(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new zu((function(t,e){return Ps(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Yc.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,Yc.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[a]=u.keys()})),pl.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Jl(t).get(e).next((function(t){return t?(Ds(t.userId===n.userId),Ll(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?pl.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Jl(t).$t({index:Xc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ds(e.batchId>=r),o=Ll(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Jl(t).$t({index:Xc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jl(t).Nt(Xc.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ll(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Yc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Zl(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Gc(u);if(a===n.userId&&e.path.isEqual(l))return Jl(t).get(c).next((function(t){if(!t)throw Cs();Ds(t.userId===n.userId),o.push(Ll(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zu(Ps),i=[];return e.forEach((function(e){var o=Yc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Zl(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Gc(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),pl.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Yc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new zu(Ps);return Zl(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Gc(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Jl(t).get(e).next((function(t){if(null===t)throw Cs();Ds(t.userId===n.userId),r.push(Ll(n.R,t))})))})),pl.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Wl(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),pl.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return pl.resolve();var r=IDBKeyRange.lowerBound(Yc.prefixForUser(e.userId)),i=[];return Zl(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Gc(t[1]);i.push(o)}else r.done()})).next((function(){Ds(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Yl(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return th(t).get(this.userId).next((function(t){return t||new Qc(e.userId,-1,"")}))},t}();function Yl(t,e,n){var r=Yc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Zl(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Jl(t){return El(t,Xc.store)}function Zl(t){return El(t,Yc.store)}function th(t){return El(t,Qc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var eh=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),nh=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new eh(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Us.fromTimestamp(new Fs(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return rh(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ds(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return rh(t).$t((function(s,a){var u=Ml(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return pl.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return rh(t).$t((function(t,n){var r=Ml(n);e(r)}))},t.prototype.Xt=function(t){return ih(t).get(il.key).next((function(t){return Ds(null!==t),t}))},t.prototype.Zt=function(t,e){return ih(t).put(il.key,e)},t.prototype.te=function(t,e){return rh(t).put(Fl(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ea(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return rh(t).$t({range:r,index:nl.queryTargetsIndexName},(function(t,n,r){var o=Ml(n);Sa(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=oh(t);return e.forEach((function(e){var s=$c(e.path);i.push(o.put(new rl(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),pl.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=oh(t);return pl.forEach(e,(function(e){var o=$c(e.path);return pl.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=oh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=oh(t),i=Zu();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Gc(t[1]),o=new ia(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=$c(e.path),r=IDBKeyRange.bound([n],[Ms(n)],!1,!0),i=0;return oh(t).$t({index:rl.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return rh(t).get(e).next((function(t){return t?Ml(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rh(t){return El(t,nl.store)}function ih(t){return El(t,il.store)}function oh(t){return El(t,rl.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sh(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){if(t.code!==_s.FAILED_PRECONDITION||t.message!==ll)throw t;return Ss("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ah(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ps(n,i);return 0===s?Ps(r,o):s}var uh=function(){function t(t){this.ne=t,this.buffer=new zu(ah),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ah(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ch=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ss("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return oe(e,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ml(e=n.sent())?(Ss("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,sh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),lh=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return pl.resolve(ws.o);var r=new uh(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ss("LruGarbageCollector","Garbage collection skipped; disabled"),pl.resolve(Gl)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ss("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Gl):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ss("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Es()<=Le.DEBUG&&Ss("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),pl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),hh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new lh(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return fh(t,n)},t.prototype.removeReference=function(t,e,n){return fh(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return fh(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return th(t).Ot((function(r){return Yl(t,r,e).next((function(t){return t&&(n=!0),pl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),oh(t).delete([0,$c(s.path)])}))}));i.push(u)}})).next((function(){return pl.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return fh(t,e)},t.prototype.we=function(t,e){var n,r=oh(t),i=ws.o;return r.$t({index:rl.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==ws.o&&e(new ia(Gc(n)),i),i=a,n=s):i=ws.o})).next((function(){i!==ws.o&&e(new ia(Gc(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function fh(t,e){return oh(t).put(function(t,e){return new rl(0,$c(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ph=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qs(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return js(this.inner)},t}(),dh=function(){function t(){this.changes=new ph((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Us.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:_a.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?pl.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),vh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return mh(t).put(bh(e),n)},t.prototype.removeEntry=function(t,e){var n=mh(t),r=bh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return mh(t).get(bh(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return mh(t).get(bh(e)).next((function(t){return{document:n.ye(e,t),size:Ql(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Wu();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Wu(),i=new Bu(ia.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ql(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return pl.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return mh(t).$t({range:r},(function(t,e,r){for(var s=ia.fromSegments(t);o&&ia.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Wu(),o=e.path.length+1,s={};if(n.isEqual(Us.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Nl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=tl.collectionReadTimeIndex}return mh(t).$t(s,(function(t,n,s){if(t.length===o){var a=Cl(r.R,n);e.path.isPrefixOf(a.key.path)?nu(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new yh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return gh(t).get(el.key).next((function(t){return Ds(!!t),t}))},t.prototype.me=function(t,e){return gh(t).put(el.key,e)},t.prototype.ye=function(t,e){if(e){var n=Cl(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Us.min()))return n}return _a.newInvalidDocument(t)},t}(),yh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ph((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return re(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new zu((function(t,e){return Ps(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Dl(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ql(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Dl(e.Ie.R,_a.newNoDocument(o,Us.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),pl.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(dh);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gh(t){return El(t,el.store)}function mh(t){return El(t,tl.store)}function bh(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ds(n<r&&n>=0&&r<=11);var o=new dl("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Wc.store)}(t),function(t){t.createObjectStore(Qc.store,{keyPath:Qc.keyPath}),t.createObjectStore(Xc.store,{keyPath:Xc.keyPath,autoIncrement:!0}).createIndex(Xc.userMutationsIndex,Xc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Yc.store)}(t),_h(t),function(t){t.createObjectStore(tl.store)}(t));var s=pl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(rl.store),t.deleteObjectStore(nl.store),t.deleteObjectStore(il.store)}(t),_h(t)),s=s.next((function(){return function(t){var e=t.store(il.store),n=new il(0,0,Us.min().toTimestamp(),0);return e.put(il.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Xc.store).Nt().next((function(n){t.deleteObjectStore(Xc.store),t.createObjectStore(Xc.store,{keyPath:Xc.keyPath,autoIncrement:!0}).createIndex(Xc.userMutationsIndex,Xc.userMutationsKeyPath,{unique:!0});var r=e.store(Xc.store),i=n.map((function(t){return r.put(t)}));return pl.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(sl.store,{keyPath:sl.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(el.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(tl.store);e.createIndex(tl.readTimeIndex,tl.readTimeIndexPath,{unique:!1}),e.createIndex(tl.collectionReadTimeIndex,tl.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(al.store,{keyPath:al.keyPath})}(t),function(t){t.createObjectStore(ul.store,{keyPath:ul.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(tl.store).$t((function(t,n){e+=Ql(n)})).next((function(){var n=new el(e);return t.store(el.store).put(el.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Qc.store),r=t.store(Xc.store);return n.Nt().next((function(n){return pl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Xc.userMutationsIndex,i).next((function(r){return pl.forEach(r,(function(r){Ds(r.userId===n.userId);var i=Ll(e.R,r);return Wl(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(rl.store),n=t.store(tl.store);return t.store(il.store).get(il.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new $s(n),s=function(t){return[0,$c(t)]}(o);r.push(e.get(s).next((function(n){return n?pl.resolve():function(n){return e.put(new rl(0,$c(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return pl.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ol.store,{keyPath:ol.keyPath});var n=e.store(ol.store),r=new $l,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:$c(i)})}};return e.store(tl.store).$t({kt:!0},(function(t,e){var n=new $s(t);return i(n.popLast())})).next((function(){return e.store(Yc.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Gc(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(nl.store);return n.$t((function(t,r){var i=Ml(r),o=Fl(e.R,i);return n.put(o)}))},t}();function _h(t){t.createObjectStore(rl.store,{keyPath:rl.keyPath}).createIndex(rl.documentTargetsIndex,rl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(nl.store,{keyPath:nl.keyPath}).createIndex(nl.queryTargetsIndexName,nl.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(il.store)}var Ih="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Th=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Is(_s.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hh(this,i),this.Le=n+"main",this.R=new xl(u),this.Be=new vl(this.Le,11,new wh(this.R)),this.qe=new nh(this.referenceDelegate,this.R),this.Ut=new Kl,this.Ue=function(t,e){return new vh(t,e)}(this.R,this.Ut),this.Qe=new Vl,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ks("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Is(_s.FAILED_PRECONDITION,Ih);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new ws(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return oe(e,void 0,void 0,(function(){return se(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return oe(e,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return oe(e,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Sh(e).put(new sl(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ml(e))return Ss("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ss("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Eh(t).get(Wc.key).next((function(t){return pl.resolve(e.tn(t))}))},t.prototype.en=function(t){return Sh(t).delete(this.clientId)},t.prototype.nn=function(){return oe(this,void 0,void 0,(function(){var t,e,n,r,i=this;return se(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=El(t,sl.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return pl.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?pl.resolve(!0):Eh(t).get(Wc.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Is(_s.FAILED_PRECONDITION,Ih);return!1}}return!(!e.networkEnabled||!e.inForeground)||Sh(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ss("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return oe(this,void 0,void 0,(function(){var t=this;return se(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Wc.store,sl.store],(function(e){var n=new Tl(e,ws.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Sh(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Xl.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ss("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,cl,(function(o){return i=new Tl(o,r.Ne?r.Ne.next():ws.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw ks("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Is(_s.FAILED_PRECONDITION,ll);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Eh(t).get(Wc.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Is(_s.FAILED_PRECONDITION,Ih)}))},t.prototype.Ze=function(t){var e=new Wc(this.clientId,this.allowTabSynchronization,Date.now());return Eh(t).put(Wc.key,e)},t.yt=function(){return vl.yt()},t.prototype.Xe=function(t){var e=this,n=Eh(t);return n.get(Wc.key).next((function(t){return e.tn(t)?(Ss("IndexedDbPersistence","Releasing primary lease."),n.delete(Wc.key)):pl.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ks("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ss("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ks("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ks("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Eh(t){return El(t,Wc.store)}function Sh(t){return El(t,sl.store)}function kh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ah=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ia.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Qa(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ia(e)).next((function(t){var e=Xu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Xu();return this.Ut.getCollectionParents(t,i).next((function(s){return pl.forEach(s,(function(s){var a=function(t,e){return new Ba(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=_a.newInvalidDocument(c),r=r.insert(c,l)),ku(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){nu(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Zu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Nu&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),xh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Zu(),i=Zu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ch=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Us.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(za(e)||Ga(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Es()<=Le.DEBUG&&Ss("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),eu(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new zu(ru(t));return e.forEach((function(e,r){nu(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Es()<=Le.DEBUG&&Ss("QueryEngine","Using full collection scan to execute query:",eu(e)),this.Sn.getDocumentsMatchingQuery(t,e,Us.min())},t}(),Dh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Bu(Ps),this.kn=new ph((function(t){return Ea(t)}),Sa),this.$n=Us.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ah(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nh(t,e,n,r){return new Dh(t,e,n,r)}function Rh(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o;return se(this,(function(s){switch(s.label){case 0:return n=Ns(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Ah(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Zu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Oh(t,e){var n=Ns(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=pl.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ds(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ph(t){var e=Ns(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Lh(t,e){var n=Ns(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ds(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Wu();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Zu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Wu();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Us.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ss("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Us.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return pl.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Mh(t,e){var n=Ns(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Fh(t,e){var n=Ns(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,pl.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Al(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Uh(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s;return se(this,(function(a){switch(a.label){case 0:r=Ns(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ml(s=a.sent()))throw s;return Ss("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Vh(t,e,n){var r=Ns(t),i=Us.min(),o=Zu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ns(t),i=r.kn.get(n);return void 0!==i?pl.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ya(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Us.min(),n?o:Zu())})).next((function(t){return{documents:t,Bn:o}}))}))}function qh(t,e){var n=Ns(t),r=Ns(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function jh(t){var e=Ns(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ns(t),i=Wu(),o=Nl(n),s=mh(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:tl.readTimeIndex,range:a},(function(t,e){var n=Cl(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Rl(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Bh(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){return[2,(e=Ns(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=mh(t),n=Us.min();return e.$t({index:tl.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Rl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $h=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return pl.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:gc(n.createTime)}),pl.resolve()},t.prototype.getNamedQuery=function(t,e){return pl.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ul(t.bundledQuery),readTime:gc(t.readTime)}}(e)),pl.resolve()},t}(),Kh=function(){function t(){this.Wn=new zu(zh.Gn),this.zn=new zu(zh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new zh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new zh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ia(new $s([])),r=new zh(n,t),i=new zh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ia(new $s([])),n=new zh(e,t),r=new zh(e,t+1),i=Zu();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new zh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),zh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ia.comparator(t.key,e.key)||Ps(t.ns,e.ns)},t.Hn=function(t,e){return Ps(t.ns,e.ns)||ia.comparator(t.key,e.key)},t}(),Gh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new zu(zh.Gn)}return t.prototype.checkEmpty=function(t){return pl.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Sl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new zh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return pl.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return pl.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return pl.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return pl.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return pl.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new zh(e,0),i=new zh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),pl.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zu(Ps);return e.forEach((function(t){var e=new zh(t,0),i=new zh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),pl.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ia.isDocumentKey(i)||(i=i.child(""));var o=new zh(new ia(i),0),s=new zu(Ps);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),pl.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ds(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return pl.forEach(e.mutations,(function(i){var o=new zh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new zh(e,0),r=this.rs.firstAfterOrEqual(n);return pl.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,pl.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Hh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Bu(ia.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return pl.resolve(n?n.document.clone():_a.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Wu();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():_a.newInvalidDocument(t))})),pl.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Wu(),i=new ia(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||nu(e,c)&&(r=r.insert(c.key,c.clone()))}return pl.resolve(r)},t.prototype.fs=function(t,e){return pl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Wh(this)},t.prototype.getSize=function(t){return pl.resolve(this.size)},t}(),Wh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return re(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),pl.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(dh),Qh=function(){function t(t){this.persistence=t,this.ds=new ph((function(t){return Ea(t)}),Sa),this.lastRemoteSnapshotVersion=Us.min(),this.highestTargetId=0,this.ws=0,this._s=new Kh,this.targetCount=0,this.ys=eh.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),pl.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return pl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return pl.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),pl.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),pl.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new eh(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,pl.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),pl.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,pl.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),pl.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return pl.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return pl.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),pl.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),pl.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),pl.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return pl.resolve(n)},t.prototype.containsKey=function(t,e){return pl.resolve(this._s.containsKey(e))},t}(),Xh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ws(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Qh(this),this.Ut=new Bl,this.Ue=function(t,e){return new Hh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new xl(e),this.Qe=new $h(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Gh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ss("MemoryPersistence","Starting transaction:",t);var i=new Yh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return pl.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Yh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return re(e,t),e}(hl),Jh=function(){function t(t){this.persistence=t,this.As=new Kh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Cs()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),pl.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),pl.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),pl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pl.forEach(this.vs,(function(r){var i=ia.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return pl.or([function(){return pl.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Zh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function tf(t,e){return"firestore_clients_"+t+"_"+e}function ef(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function nf(t,e){return"firestore_targets_"+t+"_"+e}Zh.UNAUTHENTICATED=new Zh(null),Zh.GOOGLE_CREDENTIALS=new Zh("google-credentials-uid"),Zh.FIRST_PARTY=new Zh("first-party-uid");var rf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Is(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ks("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),of=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Is(i.error.code,i.error.message)),o?new t(e,i.state,r):(ks("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),sf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ec(),s=0;i&&s<r.activeTargetIds.length;++s)i=ra(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ks("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),af=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ks("SharedClientState","Failed to parse online state: "+e),null)},t}(),uf=function(){function t(){this.activeTargetIds=ec()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),cf=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Bu(Ps),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=tf(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new uf),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return oe(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return se(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(tf(this.persistenceKey,r)))&&(o=sf.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(nf(this.persistenceKey,t));if(n){var r=of.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(nf(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ss("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ss("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ss("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ss("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ks("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return oe(e,void 0,void 0,(function(){var t,e,r,i,o,s;return se(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=ws.o;if(null!=t)try{var n=JSON.parse(t);Ds("number"==typeof n),e=n}catch(t){ks("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ws.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new rf(this.currentUser,t,e,n),i=ef(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ef(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=nf(this.persistenceKey,t),i=new of(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return sf.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rf.Vs(new Zh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return of.Vs(r,e)},t.prototype.js=function(t){return af.Vs(t)},t.prototype.ii=function(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ss("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ec();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),lf=function(){function t(){this.li=new uf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new uf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),hf=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ff=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ss("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ss("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),pf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},df=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),vf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return re(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new bs;s.listenOnce(ps.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case fs.NO_ERROR:var e=s.getResponseJson();Ss("Connection","XHR received:",JSON.stringify(e)),i(e);break;case fs.TIMEOUT:Ss("Connection",'RPC "'+t+'" timed out'),o(new Is(_s.DEADLINE_EXCEEDED,"Request time out"));break;case fs.HTTP_ERROR:var n=s.getStatus();if(Ss("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(_s).indexOf(e)>=0?e:_s.UNKNOWN}(r.status);o(new Is(a,r.message))}else o(new Is(_s.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Is(_s.UNAVAILABLE,"Connection failed."));break;default:Cs()}}finally{Ss("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new es,i=ni(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gs({})),this.Fi(o.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())||"object"==typeof navigator&&"ReactNative"===navigator.product||pe().indexOf("Electron/")>=0||function(){var t=pe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||pe().indexOf("MSAppHost/")>=0||ve()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ss("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new df({Ei:function(t){c?Ss("Connection","Not sending because WebChannel is closed:",t):(u||(Ss("Connection","Opening WebChannel transport."),a.open(),u=!0),Ss("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,ms.EventType.OPEN,(function(){c||Ss("Connection","WebChannel transport opened.")})),h(a,ms.EventType.CLOSE,(function(){c||(c=!0,Ss("Connection","WebChannel transport closed"),l.Vi())})),h(a,ms.EventType.ERROR,(function(t){c||(c=!0,As("Connection","WebChannel transport errored:",t),l.Vi(new Is(_s.UNAVAILABLE,"The operation could not be completed")))})),h(a,ms.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ds(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ss("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Lu[t];if(void 0!==e)return ju(e)}(o),u=i.message;void 0===s&&(s=_s.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Vi(new Is(s,u)),a.close()}else Ss("Connection","WebChannel received:",n),l.Si(n)}})),h(i,ds.STAT_EVENT,(function(t){t.stat===vs?Ss("Connection","Detected buffering proxy"):t.stat===ys&&Ss("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ss("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Ss("RestConnection","Received: ",t),t}),(function(e){throw As("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.5",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=pf[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yf(){return"undefined"!=typeof window?window:null}function gf(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mf(t){return new pc(t,!0)}var bf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ss("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),wf=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new bf(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return oe(this,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return oe(this,void 0,void 0,(function(){return se(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return oe(this,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===_s.RESOURCE_EXHAUSTED?(ks(e.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===_s.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Is(_s.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return oe(t,void 0,void 0,(function(){return se(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ss("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ss("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),_f=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return re(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Cs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ds(void 0===e||"string"==typeof e),Hs.fromBase64String(e||"")):(Ds(void 0===e||e instanceof Uint8Array),Hs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?_s.UNKNOWN:ju(t.code);return new Is(e,t.message||"")}(a);n=new sc(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=_c(t,r.document.name),o=gc(r.document.updateTime);var a=new ba({mapValue:{fields:r.document.fields}}),u=(s=_a.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new ic(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=_c(t,r.document),o=r.readTime?gc(r.readTime):Us.min(),a=_a.newNoDocument(i,o),s=r.removedTargetIds||[],n=new ic([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=_c(t,r.document),o=r.removedTargetIds||[],n=new ic([],o,i,null);else{if(!("filter"in e))return Cs();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Vu(r),o=l.targetId,n=new oc(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Us.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Us.min():e.readTime?gc(e.readTime):Us.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ec(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ka(r)?{documents:Cc(t,r)}:{query:Dc(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=vc(t,e.resumeToken):e.snapshotVersion.compareTo(Us.min())>0&&(n.readTime=dc(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Cs()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ec(this.R),e.removeTarget=t,this.cr(e)},e}(wf),If=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return re(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ds(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ds(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?gc(t.updateTime):gc(e);return n.isEqual(Us.min())&&(n=gc(e)),new _u(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=gc(t.commitTime);return this.listener.Tr(n,e)}return Ds(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ec(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ac(e.R,t)}))};this.cr(n)},e}(wf),Tf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return re(e,t),e.prototype.br=function(){if(this.Rr)throw new Is(_s.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===_s.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Is(_s.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===_s.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Is(_s.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Ef=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ks(e),this.Vr=!1):Ss("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Sf=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return oe(o,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return Pf(this)?(Ss("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return(e=Ns(t)).Or.add(4),[4,Af(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,kf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Ef(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kf(t){return oe(this,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:if(!Pf(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Af(t){return oe(this,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xf(t,e){var n=Ns(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Of(n)?Rf(n):Qf(n).er()&&Df(n,e))}function Cf(t,e){var n=Ns(t),r=Qf(n);n.$r.delete(e),r.er()&&Nf(n,e),0===n.$r.size&&(r.er()?r.ir():Pf(n)&&n.Br.set("Unknown"))}function Df(t,e){t.qr.U(e.targetId),Qf(t).mr(e)}function Nf(t,e){t.qr.U(e),Qf(t).yr(e)}function Rf(t){t.qr=new uc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Qf(t).start(),t.Br.Sr()}function Of(t){return Pf(t)&&!Qf(t).tr()&&t.$r.size>0}function Pf(t){return 0===Ns(t).Or.size}function Lf(t){t.qr=void 0}function Mf(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){return t.$r.forEach((function(e,n){Df(t,e)})),[2]}))}))}function Ff(t,e){return oe(this,void 0,void 0,(function(){return se(this,(function(n){return Lf(t),Of(t)?(t.Br.Nr(e),Rf(t)):t.Br.set("Unknown"),[2]}))}))}function Uf(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o;return se(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof sc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o;return se(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ss("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Vf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ic?t.qr.X(e):e instanceof oc?t.qr.rt(e):t.qr.et(e),n.isEqual(Us.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ph(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Hs.EMPTY_BYTE_STRING,n.snapshotVersion)),Nf(t,e);var r=new Al(n.target,e,1,n.sequenceNumber);Df(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ss("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Vf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Vf(t,e,n){return oe(this,void 0,void 0,(function(){var r=this;return se(this,(function(i){switch(i.label){case 0:if(!ml(e))throw e;return t.Or.add(1),[4,Af(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ph(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return oe(r,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return Ss("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,kf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function qf(t,e){return e().catch((function(n){return Vf(t,n,e)}))}function jf(t){return oe(this,void 0,void 0,(function(){var e,n,r,i,o;return se(this,(function(s){switch(s.label){case 0:e=Ns(t),n=Xf(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Pf(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Mh(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Xf(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Vf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Bf(e)&&$f(e),[2]}}))}))}function Bf(t){return Pf(t)&&!Xf(t).tr()&&t.kr.length>0}function $f(t){Xf(t).start()}function Kf(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){return Xf(t).Ar(),[2]}))}))}function zf(t){return oe(this,void 0,void 0,(function(){var e,n,r,i;return se(this,(function(o){for(e=Xf(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Gf(t,e,n){return oe(this,void 0,void 0,(function(){var r,i;return se(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=kl.from(r,e,n),[4,qf(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,jf(t)];case 2:return o.sent(),[2]}}))}))}function Hf(t,e){return oe(this,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return e&&Xf(t).pr?[4,function(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return qu(r=e.code)&&r!==_s.ABORTED?(n=t.kr.shift(),Xf(t).sr(),[4,qf(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,jf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Bf(t)&&$f(t),[2]}}))}))}function Wf(t,e){return oe(this,void 0,void 0,(function(){var n;return se(this,(function(r){switch(r.label){case 0:return n=Ns(t),e?(n.Or.delete(2),[4,kf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Af(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Qf(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ns(t);return r.br(),new _f(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Mf.bind(null,t),Ri:Ff.bind(null,t),_r:Uf.bind(null,t)}),t.Mr.push((function(n){return oe(e,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Of(t)?Rf(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Lf(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Xf(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ns(t);return r.br(),new If(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kf.bind(null,t),Ri:Hf.bind(null,t),Ir:zf.bind(null,t),Tr:Gf.bind(null,t)}),t.Mr.push((function(n){return oe(e,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,jf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ss("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Yf=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Is(_s.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Jf(t,e){if(ks("AsyncQueue",e+": "+t),ml(t))return new Is(_s.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zf=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ia.comparator(e.key,n.key)}:function(t,e){return ia.comparator(t.key,e.key)},this.keyedMap=Xu(),this.sortedSet=new Bu(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),tp=function(){function t(){this.Kr=new Bu(ia.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Cs():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ep=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Zf.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Za(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),np=function(){this.Wr=void 0,this.listeners=[]},rp=function(){this.queries=new ph((function(t){return tu(t)}),Za),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ip(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return se(this,(function(c){switch(c.label){case 0:if(n=Ns(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new np),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Jf(a,"Initialization of query '"+eu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&up(n),[2]}}))}))}function op(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s;return se(this,(function(a){return n=Ns(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function sp(t,e){for(var n=Ns(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&up(n)}function ap(t,e,n){var r=Ns(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function up(t){t.Gr.forEach((function(t){t.next()}))}var cp=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ep(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ep.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),lp=function(t){this.key=t},hp=function(t){this.key=t},fp=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Zu(),this.mutatedKeys=Zu(),this.lo=ru(t),this.fo=new Zf(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new tp,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=za(this.query)&&i.size===this.query.limit?i.last():null,c=Ga(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=nu(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),za(this.query)||Ga(this.query))for(;s.size>this.query.limit;){var l=za(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cs()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new ep(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new tp,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Zu(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new hp(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new lp(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Zu();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ep.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),pp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},dp=function(t){this.key=t,this.bo=!1},vp=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ph((function(t){return tu(t)}),Za),this.Vo=new Map,this.So=new Set,this.Do=new Bu(ia.comparator),this.Co=new Map,this.No=new Kh,this.xo={},this.Fo=new Map,this.ko=eh.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a;return se(this,(function(u){switch(u.label){case 0:return n=zp(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Fh(n.localStore,Ya(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,gp(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&xf(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function gp(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o,s,a,u,c;return se(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o,s;return se(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Vh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Dp(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Vh(t.localStore,e,!0)];case 1:return i=l.sent(),o=new fp(e,i.Bn),s=o._o(i.documents),a=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Dp(t,n,u.To),c=new pp(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function mp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:return n=Ns(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Za(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Uh(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Cf(n.remoteStore,r.targetId),xp(n,r.targetId)})).catch(sh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return xp(n,r.targetId),[4,Uh(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function bp(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s;return se(this,(function(a){switch(a.label){case 0:r=Gp(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ns(t),i=Fs.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Zu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Au(c,n.get(c.key));null!=l&&s.push(new Nu(c.key,l,wa(l.value.mapValue),Iu.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Bu(Ps)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Op(r,i.changes)];case 3:return a.sent(),[4,jf(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Jf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function wp(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:n=Ns(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Lh(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ds(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ds(r.bo):t.removedDocuments.size>0&&(Ds(r.bo),r.bo=!1))})),[4,Op(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,sh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function _p(t,e,n){var r=Ns(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ns(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&up(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ip(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s,a,u;return se(this,(function(c){switch(c.label){case 0:return(r=Ns(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Bu(ia.comparator)).insert(o,_a.newNoDocument(o,Us.min())),a=Zu().add(o),u=new nc(Us.min(),new Map,new zu(Ps),s,a),[4,wp(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Rp(r),[3,4];case 2:return[4,Uh(r.localStore,e,!1).then((function(){return xp(r,e,n)})).catch(sh)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Tp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:n=Ns(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Oh(n.localStore,e)];case 2:return i=o.sent(),Ap(n,r,null),kp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Op(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,sh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ep(t,e,n){return oe(this,void 0,void 0,(function(){var r,i;return se(this,(function(o){switch(o.label){case 0:r=Ns(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ns(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ds(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Ap(r,e,n),kp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Op(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,sh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s;return se(this,(function(a){switch(a.label){case 0:Pf((n=Ns(t)).remoteStore)||Ss("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ns(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Jf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function kp(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Ap(t,e,n){var r=Ns(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function xp(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Cp(t,e)}))}function Cp(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Cf(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Rp(t))}function Dp(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof lp?(t.No.addReference(o.key,e),Np(t,o)):o instanceof hp?(Ss("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Cp(t,o.key)):Cs()}}function Np(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ss("SyncEngine","New document in limbo: "+n),t.So.add(r),Rp(t))}function Rp(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ia($s.fromString(e)),r=t.ko.next();t.Co.set(r,new dp(n)),t.Do=t.Do.insert(n,r),xf(t.remoteStore,new Al(Ya(Ka(n.path)),r,2,ws.o))}}function Op(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s;return se(this,(function(a){switch(a.label){case 0:return r=Ns(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return se(this,(function(h){switch(h.label){case 0:n=Ns(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return pl.forEach(e,(function(e){return pl.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return pl.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ml(r=h.sent()))throw r;return Ss("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Pp(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return(n=Ns(t)).currentUser.isEqual(e)?[3,3]:(Ss("SyncEngine","User change. New user:",e.toKey()),[4,Rh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Is(_s.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Op(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Lp(t,e){var n=Ns(t),r=n.Co.get(e);if(r&&r.bo)return Zu().add(r.key);var i=Zu(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Mp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:return[4,Vh((n=Ns(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Dp(n,e.targetId,i.To),i)]}}))}))}function Fp(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){return[2,jh((e=Ns(t)).localStore).then((function(t){return Op(e,t)}))]}))}))}function Up(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o;return se(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ns(t),r=Ns(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):pl.resolve(null)}))}))}((i=Ns(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,jf(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ap(i,e,r||null),kp(i,e),function(t,e){Ns(Ns(t)._n).Gt(e)}(i.localStore,e)):Cs(),s.label=4;case 4:return[4,Op(i,o)];case 5:return s.sent(),[3,7];case 6:Ss("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Vp(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return se(this,(function(l){switch(l.label){case 0:return zp(n=Ns(t)),Gp(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,qp(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Wf(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],xf(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return xp(n,e),Uh(n.localStore,e,!0)})),Cf(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,qp(n,u)];case 5:return l.sent(),function(t){var e=Ns(t);e.Co.forEach((function(t,n){Cf(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Bu(ia.comparator)}(n),n.$o=!1,[4,Wf(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function qp(t,e,n){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return se(this,(function(y){switch(y.label){case 0:n=Ns(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Fh(n.localStore,Ya(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,Mp(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,qh(n.localStore,a)];case 8:return v=y.sent(),[4,Fh(n.localStore,v)];case 9:return u=y.sent(),[4,gp(n,jp(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function jp(t){return $a(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Bp(t){var e=Ns(t);return Ns(Ns(e.localStore).persistence).fn()}function $p(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o,s;return se(this,(function(a){switch(a.label){case 0:return(i=Ns(t)).$o?(Ss("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,jh(i.localStore)];case 3:return o=a.sent(),s=nc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Op(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Uh(i.localStore,e,!0)];case 6:return a.sent(),xp(i,e,r),[3,8];case 7:Cs(),a.label=8;case 8:return[2]}}))}))}function Kp(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return se(this,(function(p){switch(p.label){case 0:if(!(r=zp(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ss("SyncEngine","Adding an already active target "+s),[3,5]):[4,qh(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Fh(r.localStore,a)];case 3:return u=p.sent(),[4,gp(r,jp(a),u.targetId,!1)];case 4:p.sent(),xf(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return se(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Uh(r.localStore,t,!1).then((function(){Cf(r.remoteStore,t),xp(r,t)})).catch(sh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function zp(t){var e=Ns(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ip.bind(null,e),e.vo._r=sp.bind(null,e.eventManager),e.vo.Mo=ap.bind(null,e.eventManager),e}function Gp(t){var e=Ns(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ep.bind(null,e),e}var Hp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return this.R=mf(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Nh(this.persistence,new Ch,t.initialUser,this.R)},t.prototype.qo=function(t){return new Xh(Jh.bs,this.R)},t.prototype.Bo=function(t){return new lf},t.prototype.terminate=function(){return oe(this,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return re(e,t),e.prototype.initialize=function(e){return oe(this,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Bh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Gp(this.Ko.syncEngine)];case 4:return n.sent(),[4,jf(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Nh(this.persistence,new Ch,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ch(e,t.asyncQueue)},e.prototype.qo=function(t){var e=kh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Hl.withCacheSize(this.cacheSizeBytes):Hl.DEFAULT;return new Th(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,yf(),gf(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new lf},e}(Hp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return re(e,t),e.prototype.initialize=function(e){return oe(this,void 0,void 0,(function(){var n,r=this;return se(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof cf?(this.sharedClientState.syncEngine={ui:Up.bind(null,n),ai:$p.bind(null,n),hi:Kp.bind(null,n),fn:Bp.bind(null,n),ci:Fp.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return oe(r,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,Vp(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=yf();if(!cf.yt(e))throw new Is(_s.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new cf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Wp),Xp=function(){function t(){}return t.prototype.initialize=function(t,e){return oe(this,void 0,void 0,(function(){var n=this;return se(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return _p(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Pp.bind(null,this.syncEngine),[4,Wf(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new rp},t.prototype.createDatastore=function(t){var e,n=mf(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new vf(e));return function(t,e,n){return new Tf(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return _p(s.syncEngine,t,0)},o=ff.yt()?new ff:new hf,new Sf(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new vp(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return e=Ns(t),Ss("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Af(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Yp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Jp=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return oe(this,void 0,void 0,(function(){var e,n=this;return se(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Is(_s.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a;return se(this,(function(u){switch(u.label){case 0:return n=Ns(t),r=Ec(n.R)+"/documents",i={documents:e.map((function(t){return wc(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ds(!!e.found),e.found.name,e.found.updateTime;var n=_c(t,e.found.name),r=gc(e.found.updateTime),i=new ba({mapValue:{fields:e.found.fields}});return _a.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ds(!!e.missing),Ds(!!e.readTime);var n=_c(t,e.missing),r=gc(e.readTime);return _a.newNoDocument(n,r)}(t,e):Cs()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ds(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Fu(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return oe(this,void 0,void 0,(function(){var t,e=this;return se(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ia.fromPath(n);e.mutations.push(new Uu(r,e.precondition(r)))})),[4,function(t,e){return oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:return n=Ns(t),r=Ec(n.R)+"/documents",i={writes:e.map((function(t){return Ac(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Cs();e=Us.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Is(_s.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Iu.updateTime(e):Iu.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Us.min()))throw new Is(_s.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Iu.updateTime(e)}return Iu.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Zp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new bf(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return oe(t,void 0,void 0,(function(){var t,e,n=this;return se(this,(function(r){return t=new Jp(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ea(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qu(e)}return!1},t}(),td=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Zh.UNAUTHENTICATED,this.clientId=Os.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return oe(r,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return Ss("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return oe(this,void 0,void 0,(function(){return se(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Is(_s.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new fl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return oe(t,void 0,void 0,(function(){var t,n;return se(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Jf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function ed(t,e){return oe(this,void 0,void 0,(function(){var n,r,i=this;return se(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ss("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return oe(i,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Rh(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function nd(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,rd(t)];case 1:return n=i.sent(),Ss("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return(n=Ns(t)).asyncQueue.verifyOperationInProgress(),Ss("RemoteStore","RemoteStore received new credentials"),r=Pf(n),n.Or.add(3),[4,Af(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,kf(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function rd(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ss("FirestoreClient","Using default OfflineComponentProvider"),[4,ed(t,new Hp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function id(t){return oe(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ss("FirestoreClient","Using default OnlineComponentProvider"),[4,nd(t,new Xp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function od(t){return rd(t).then((function(t){return t.persistence}))}function sd(t){return rd(t).then((function(t){return t.localStore}))}function ad(t){return id(t).then((function(t){return t.remoteStore}))}function ud(t){return id(t).then((function(t){return t.syncEngine}))}function cd(t){return oe(this,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:return[4,id(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=yp.bind(null,e.syncEngine),n.onUnlisten=mp.bind(null,e.syncEngine),n)]}}))}))}function ld(t,e,n){var r=this;void 0===n&&(n={});var i=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(r,void 0,void 0,(function(){var r;return se(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yp({next:function(o){e.enqueueAndForget((function(){return op(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Is(_s.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Is(_s.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new cp(Ka(n.path),o,{includeMetadataChanges:!0,so:!0});return ip(t,s)},[4,cd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function hd(t,e,n){var r=this;void 0===n&&(n={});var i=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(r,void 0,void 0,(function(){var r;return se(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yp({next:function(n){e.enqueueAndForget((function(){return op(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Is(_s.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new cp(n,o,{includeMetadataChanges:!0,so:!0});return ip(t,s)},[4,cd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var fd=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},pd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),dd=new Map,vd=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},yd=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Zh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),gd=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),md=function(){function t(t){var e=this;this.currentUser=Zh.UNAUTHENTICATED,this.oc=new fl,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ss("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(Ss("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ss("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ds("string"==typeof n.accessToken),new vd(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return Ds(null===t||"string"==typeof t),new Zh(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return oe(t,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},t}(),bd=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=Zh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),wd=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new bd(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Zh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _d(t,e,n){if(!n)throw new Is(_s.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Id(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Is(_s.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Td(t,e,n,r){if(!0===e&&!0===r)throw new Is(_s.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ed(t){if(!ia.isDocumentKey(t))throw new Is(_s.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Sd(t){if(ia.isDocumentKey(t))throw new Is(_s.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function kd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Cs()}function Ad(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Is(_s.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=kd(t);throw new Is(_s.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function xd(t,e){if(e<=0)throw new Is(_s.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Is(_s.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Is(_s.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Td("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Dd=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cd({}),this._settingsFrozen=!1,t instanceof pd?(this._databaseId=t,this._credentials=new yd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Is(_s.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pd(t.options.projectId)}(t),this._credentials=new md(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Is(_s.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Is(_s.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new yd;switch(t.type){case"gapi":var e=t.client;return Ds(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new wd(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Is(_s.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=dd.get(this))&&(Ss("ComponentProvider","Removing Datastore"),dd.delete(this),t.terminate()),Promise.resolve();var t},t}(),Nd=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Od(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Rd=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Od=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ka(r))||this)._path=r,i.type="collection",i}return re(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Nd(this.firestore,null,new ia(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Rd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=xe(t),_d("collection","path",e),t instanceof Dd)return Sd(n=$s.fromString.apply($s,ce([e],r))),new Od(t,null,n);if(!(t instanceof Nd||t instanceof Od))throw new Is(_s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sd(n=$s.fromString.apply($s,ce([t.path],r)).child($s.fromString(e))),new Od(t.firestore,null,n)}function Ld(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=xe(t),1===arguments.length&&(e=Os.u()),_d("doc","path",e),t instanceof Dd)return Ed(n=$s.fromString.apply($s,ce([e],r))),new Nd(t,null,new ia(n));if(!(t instanceof Nd||t instanceof Od))throw new Is(_s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ed(n=t._path.child($s.fromString.apply($s,ce([e],r)))),new Nd(t.firestore,t instanceof Od?t.converter:null,new ia(n))}function Md(t,e){return t=xe(t),e=xe(e),(t instanceof Nd||t instanceof Od)&&(e instanceof Nd||e instanceof Od)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Fd(t,e){return t=xe(t),e=xe(e),t instanceof Rd&&e instanceof Rd&&t.firestore===e.firestore&&Za(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Ud=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new bf(this,"async_queue_retry"),this.Ac=function(){var e=gf();e&&Ss("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=gf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=gf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return oe(this,void 0,void 0,(function(){var t,e=this;return se(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!ml(t=n.sent()))throw t;return Ss("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,ks("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=Yf.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&Cs()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return oe(this,void 0,void 0,(function(){var t;return se(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Vd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var qd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ud,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return re(e,t),e.prototype._terminate=function(){return this._firestoreClient||Bd(this),this._firestoreClient.terminate()},e}(Dd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jd(t){return t._firestoreClient||Bd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Bd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new fd(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new td(t._credentials,t._queue,r)}function $d(t,e,n){var r=this,i=new fl;return t.asyncQueue.enqueue((function(){return oe(r,void 0,void 0,(function(){var r;return se(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ed(t,n)];case 1:return o.sent(),[4,nd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===_s.FAILED_PRECONDITION||t.code===_s.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Kd(t){if(t._initialized||t._terminated)throw new Is(_s.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Is(_s.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zs(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Gd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Hs.fromBase64String(e))}catch(e){throw new Is(_s.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Hs.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Hd=function(t){this._methodName=t},Wd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Is(_s.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Is(_s.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ps(this._lat,t._lat)||Ps(this._long,t._long)},t}(),Qd=/^__.*__$/,Xd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Nu(t,this.data,this.fieldMask,e,this.fieldTransforms):new Du(t,this.data,e,this.fieldTransforms)},t}(),Yd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Nu(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cs()}}var Zd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return bv(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(Jd(this.xc)&&Qd.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),tv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||mf(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new Zd({xc:t,methodName:e,Uc:n,path:zs.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ev(t){var e=t._freezeSettings(),n=mf(t._databaseId);return new tv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);vv("Data must be an object, but it was:",s,r);var a,u,c=pv(r,s);if(o.merge)a=new Gs(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=yv(e,f[h],n);if(!s.contains(p))throw new Is(_s.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");wv(l,p)||l.push(p)}a=new Gs(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Xd(new ba(c),a,u)}var rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Hd);function iv(t,e,n){return new Zd({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype._toFieldTransform=function(t){return new wu(t.path,new fu)},e.prototype.isEqual=function(t){return t instanceof e},e}(Hd),sv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return re(e,t),e.prototype._toFieldTransform=function(t){var e=iv(this,t,!0),n=this.Kc.map((function(t){return fv(t,e)})),r=new pu(n);return new wu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Hd),av=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return re(e,t),e.prototype._toFieldTransform=function(t){var e=iv(this,t,!0),n=this.Kc.map((function(t){return fv(t,e)})),r=new vu(n);return new wu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Hd),uv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return re(e,t),e.prototype._toFieldTransform=function(t){var e=new gu(t.R,au(t.R,this.jc));return new wu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Hd);function cv(t,e,n,r){var i=t.Qc(1,e,n);vv("Data must be an object, but it was:",i,r);var o=[],s=ba.empty();qs(r,(function(t,r){var a=mv(e,t,n);r=xe(r);var u=i.Mc(a);if(r instanceof rv)o.push(a);else{var c=fv(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Gs(o);return new Yd(s,a,i.fieldTransforms)}function lv(t,e,n,r,i,o){var s=t.Qc(1,e,n),a=[yv(e,r,n)],u=[i];if(o.length%2!=0)throw new Is(_s.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(yv(e,o[c])),u.push(o[c+1]);for(var l=[],h=ba.empty(),f=a.length-1;f>=0;--f)if(!wv(l,a[f])){var p=a[f],d=u[f];d=xe(d);var v=s.Mc(p);if(d instanceof rv)l.push(p);else{var y=fv(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new Gs(l);return new Yd(h,g,s.fieldTransforms)}function hv(t,e,n,r){return void 0===r&&(r=!1),fv(n,t.Qc(r?4:3,e))}function fv(t,e){if(dv(t=xe(t)))return vv("Unsupported field value:",e,t),pv(t,e);if(t instanceof Hd)return function(t,e){if(!Jd(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=fv(o[i],e.Lc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=xe(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return au(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fs.fromDate(t);return{timestampValue:dc(e.R,n)}}if(t instanceof Fs)return n=new Fs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:dc(e.R,n)};if(t instanceof Wd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gd)return{bytesValue:vc(e.R,t._byteString)};if(t instanceof Nd){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:mc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+kd(t))}(t,e)}function pv(t,e){var n={};return js(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(function(t,r){var i=fv(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function dv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fs||t instanceof Wd||t instanceof Gd||t instanceof Nd||t instanceof Hd)}function vv(t,e,n){if(!dv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=kd(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function yv(t,e,n){if((e=xe(e))instanceof zd)return e._internalPath;if("string"==typeof e)return mv(t,e);throw bv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var gv=new RegExp("[~\\*/\\[\\]]");function mv(t,e,n){if(e.search(gv)>=0)throw bv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(zd.bind.apply(zd,ce([void 0],e.split(".")))))._internalPath}catch(r){throw bv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function bv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Is(_s.INVALID_ARGUMENT,(a+=". ")+t+u)}function wv(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _v=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Nd(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Iv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Tv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(_v);function Tv(t,e){return"string"==typeof e?mv(t,e):e instanceof zd?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ev=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return re(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new kv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Tv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(_v),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Sv),Av=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ev(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new kv(n._firestore,n._userDataWriter,r.key,r,new Ev(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Is(_s.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new kv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ev(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new kv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ev(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:xv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function xv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cs()}}function Cv(t,e){return t instanceof Sv&&e instanceof Sv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Av&&e instanceof Av&&t._firestore===e._firestore&&Fd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dv(t){if(Ga(t)&&0===t.explicitOrderBy.length)throw new Is(_s.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nv=function(){};function Rv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return re(e,t),e.prototype._apply=function(t){var e=ev(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Is(_s.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){qv(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Vv(r,t,h))}a={arrayValue:{values:u}}}else a=Vv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||qv(s,o),a=hv(n,"where",s,"in"===o||"not-in"===o);var f=Aa.create(i,o,a);return function(t,e){if(e.g()){var n=Wa(t);if(null!==n&&!n.isEqual(e.field))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ha(t);null!==r&&jv(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Is(_s.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Is(_s.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Rd(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Nv),Pv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return re(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Is(_s.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Is(_s.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ua(e,n);return function(t,e){if(null===Ha(t)){var n=Wa(t);null!==n&&jv(t,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new Rd(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ba(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Nv),Lv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return re(e,t),e.prototype._apply=function(t){return new Rd(t.firestore,t.converter,Ja(t._query,this.Jc,this.Yc))},e}(Nv),Mv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return re(e,t),e.prototype._apply=function(t){var e=Uv(t,this.type,this.Xc,this.Zc);return new Rd(t.firestore,t.converter,function(t,e){return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Nv),Fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return re(e,t),e.prototype._apply=function(t){var e=Uv(t,this.type,this.Xc,this.Zc);return new Rd(t.firestore,t.converter,function(t,e){return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Nv);function Uv(t,e,n,r){if(n[0]=xe(n[0]),n[0]instanceof _v)return function(t,e,n,r,i){if(!r)throw new Is(_s.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Xa(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(fa(e,r.key));else{var c=r.data.field(u.field);if(Js(c))throw new Is(_s.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Is(_s.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ma(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ev(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Is(_s.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Is(_s.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qa(t)&&-1!==c.indexOf("/"))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child($s.fromString(c));if(!ia.isDocumentKey(l))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ia(l);a.push(fa(e,h))}else{var f=hv(n,r,c);a.push(f)}}return new Ma(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Vv(t,e,n){if("string"==typeof(n=xe(n))){if(""===n)throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qa(e)&&-1!==n.indexOf("/"))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child($s.fromString(n));if(!ia.isDocumentKey(r))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fa(t,new ia(r))}if(n instanceof Nd)return fa(t,n._key);throw new Is(_s.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+kd(n)+".")}function qv(t,e){if(!Array.isArray(t)||0===t.length)throw new Is(_s.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Is(_s.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function jv(t,e,n){if(!n.isEqual(e))throw new Is(_s.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),oa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ys(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Cs()}},t.prototype.convertObject=function(t,e){var n=this,r={};return qs(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Wd(Xs(t.latitude),Xs(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Zs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ta(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Qs(t);return new Fs(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=$s.fromString(t);Ds(Bc(n));var r=new pd(n.get(1),n.get(3)),i=new ia(n.popFirst(5));return r.isEqual(e)||ks("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $v(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Kv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return re(e,t),e.prototype.convertBytes=function(t){return new Gd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nd(this.firestore,null,e)},e}(Bv),zv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ev(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Gv(t,this._firestore),i=$v(r.converter,e,n),o=nv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Iu.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Gv(t,this._firestore);return o="string"==typeof(e=xe(e))||e instanceof zd?lv(this._dataReader,"WriteBatch.update",s._key,e,n,r):cv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Iu.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Gv(t,this._firestore);return this._mutations=this._mutations.concat(new Fu(e._key,Iu.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Is(_s.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gv(t,e){if((t=xe(t)).firestore!==e)throw new Is(_s.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return re(e,t),e.prototype.convertBytes=function(t){return new Gd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nd(this.firestore,null,e)},e}(Bv);function Wv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ad(t,Nd);var o=Ad(t.firestore,qd),s=ev(o);return Xv(o,[("string"==typeof(e=xe(e))||e instanceof zd?lv(s,"updateDoc",t._key,e,n,r):cv(s,"updateDoc",t._key,e)).toMutation(t._key,Iu.exists(!0))])}function Qv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=xe(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Vd(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Vd(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Nd)c=Ad(t.firestore,qd),l=Ka(t._key.path),u={next:function(e){i[a]&&i[a](Yv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Ad(t,Rd);c=Ad(p.firestore,qd),l=p._query;var d=new Hv(c);u={next:function(t){i[a]&&i[a](new Av(c,d,p,t))},error:i[a+1],complete:i[a+2]},Dv(t._query)}return function(t,e,n,r){var i=this,o=new Yp(r),s=new cp(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return oe(i,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return e=ip,[4,cd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return oe(i,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return e=op,[4,cd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(jd(c),l,h,u)}function Xv(t,e){return function(t,e){var n=this,r=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var n;return se(this,(function(i){switch(i.label){case 0:return n=bp,[4,ud(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(jd(t),e)}function Yv(t,e,n){var r=n.docs.get(e._key),i=new Hv(t);return new Sv(t,i,e._key,r,new Ev(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return re(e,t),e.prototype.get=function(e){var n=this,r=Gv(e,this._firestore),i=new Hv(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Sv(n._firestore,i,r._key,t._document,new Ev(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ev(t)}return t.prototype.get=function(t){var e=this,n=Gv(t,this._firestore),r=new Kv(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Cs();var i=t[0];if(i.isFoundDocument())return new _v(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new _v(e._firestore,r,n._key,null,n.converter);throw Cs()}))},t.prototype.set=function(t,e,n){var r=Gv(t,this._firestore),i=$v(r.converter,e,n),o=nv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Gv(t,this._firestore);return o="string"==typeof(e=xe(e))||e instanceof zd?lv(this._dataReader,"Transaction.update",s._key,e,n,r):cv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Gv(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zv(){if("undefined"==typeof Uint8Array)throw new Is(_s.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ty(){if("undefined"==typeof atob)throw new Is(_s.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ey=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return ty(),new t(Gd.fromBase64String(e))},t.fromUint8Array=function(e){return Zv(),new t(Gd.fromUint8Array(e))},t.prototype.toBase64=function(){return ty(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Zv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),ny=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Kd(t=Ad(t,qd));var n=jd(t),r=t._freezeSettings(),i=new Xp;return $d(n,i,new Wp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Kd(t=Ad(t,qd));var e=jd(t),n=t._freezeSettings(),r=new Xp;return $d(e,r,new Qp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Is(_s.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new fl;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return oe(e,void 0,void 0,(function(){var e;return se(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return vl.yt()?(e=t+"main",[4,vl.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(kh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),ry=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof pd||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||As("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Ad(t,Dd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&As("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=ie({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[le.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),le.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Is(_s.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new gd(new vd(o,new Zh(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return oe(e,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:return[4,od(t)];case 1:return e=r.sent(),[4,ad(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ns(t);return e.Or.delete(0),kf(e)}(n))]}}))}))}))}(jd(Ad(this._delegate,qd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return oe(e,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:return[4,od(t)];case 1:return e=r.sent(),[4,ad(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return(e=Ns(t)).Or.add(0),[4,Af(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(jd(Ad(this._delegate,qd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Td("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(e,void 0,void 0,(function(){var e;return se(this,(function(r){switch(r.label){case 0:return e=Sp,[4,ud(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(jd(Ad(this._delegate,qd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Yp(e);return t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ns(t).Gr.add(e),e.next()},[4,cd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ns(t).Gr.delete(e)},[4,cd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(jd(t=Ad(t,qd)),Vd(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new Is(_s.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gy(this,Pd(this._delegate,t))}catch(t){throw cy(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new uy(this,Ld(this._delegate,t))}catch(t){throw cy(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new dy(this,function(t,e){if(t=Ad(t,Dd),_d("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Is(_s.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Rd(t,null,function(t){return new Ba($s.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw cy(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var n;return se(this,(function(i){switch(i.label){case 0:return[4,function(t){return id(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Zp(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(jd(t),(function(n){return e(new Jv(t,n))}))}(this._delegate,(function(n){return t(new oy(e,n))}))},t.prototype.batch=function(){var t=this;return jd(this._delegate),new sy(new zv(this._delegate,(function(e){return Xv(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Is(_s.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Is(_s.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),iy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return re(e,t),e.prototype.convertBytes=function(t){return new ey(new Gd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return uy.nu(e,this.firestore,null)},e}(Bv);var oy=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new iy(t)}return t.prototype.get=function(t){var e=this,n=my(t);return this._delegate.get(n).then((function(t){return new fy(e._firestore,new Sv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=my(t);return n?(Id("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=my(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ce([s,e,n],i)),this},t.prototype.delete=function(t){var e=my(t);return this._delegate.delete(e),this},t}(),sy=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=my(t);return n?(Id("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=my(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ce([s,e,n],i)),this},t.prototype.delete=function(t){var e=my(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ay=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new kv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new py(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new iy(e),n),i.set(n,o)),o},t}();ay.iu=new WeakMap;var uy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new iy(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new Is(_s.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Nd(n._delegate,r,new ia(e)))},t.nu=function(e,n,r){return new t(n,new Nd(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gy(this.firestore,Pd(this._delegate,t))}catch(t){throw cy(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=xe(t))instanceof Nd&&Md(this._delegate,t)},t.prototype.set=function(t,e){e=Id("DocumentReference.set",e);try{return function(t,e,n){t=Ad(t,Nd);var r=Ad(t.firestore,qd),i=$v(t.converter,e,n);return Xv(r,[nv(ev(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Iu.none())])}(this._delegate,t,e)}catch(t){throw cy(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Wv(this._delegate,t):Wv.apply(void 0,ce([this._delegate,t,e],n))}catch(t){throw cy(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Xv(Ad((t=this._delegate).firestore,qd),[new Fu(t._key,Iu.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ly(e),i=hy(e,(function(e){return new fy(t.firestore,new Sv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Qv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ad(t,Nd);var e=Ad(t.firestore,qd),n=jd(e),r=new Hv(e);return function(t,e){var n=this,r=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var n;return se(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oe(this,void 0,void 0,(function(){var r,i;return se(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ns(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Is(_s.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Jf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,sd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Sv(e,r,t._key,n,new Ev(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ad(t,Nd);var e=Ad(t.firestore,qd);return ld(jd(e),t._key,{source:"server"}).then((function(n){return Yv(e,t,n)}))}(this._delegate):function(t){t=Ad(t,Nd);var e=Ad(t.firestore,qd);return ld(jd(e),t._key).then((function(n){return Yv(e,t,n)}))}(this._delegate)).then((function(t){return new fy(e.firestore,new Sv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ay.su(this.firestore,e)):this._delegate.withConverter(null))},t}();function cy(t,e,n){return t.message=t.message.replace(e,n),t}function ly(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Vd(r))return r}return{}}function hy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Vd(t[0])?t[0]:Vd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var fy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new uy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Cv(this._delegate,t._delegate)},t}(),py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(fy),dy=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new iy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Rv(this._delegate,function(t,e,n){var r=e,i=Tv("where",t);return new Ov(i,r,n)}(e,n,r)))}catch(e){throw cy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Rv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Tv("orderBy",t);return new Pv(r,n)}(e,n)))}catch(e){throw cy(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return xd("limit",t),new Lv("limit",t,"F")}(e)))}catch(e){throw cy(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Rv(this._delegate,function(t){return xd("limitToLast",t),new Lv("limitToLast",t,"L")}(e)))}catch(e){throw cy(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mv("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw cy(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mv("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw cy(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fv("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw cy(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Rv(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fv("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw cy(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Fd(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ad(t,Rd);var e=Ad(t.firestore,qd),n=jd(e),r=new Hv(e);return function(t,e){var n=this,r=new fl;return t.asyncQueue.enqueueAndForget((function(){return oe(n,void 0,void 0,(function(){var n;return se(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o,s,a;return se(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Vh(t,e,!0)];case 1:return a=u.sent(),r=new fp(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Jf(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,sd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Av(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ad(t,Rd);var e=Ad(t.firestore,qd),n=jd(e),r=new Hv(e);return hd(n,t._query,{source:"server"}).then((function(n){return new Av(e,r,t,n)}))}(this._delegate):function(t){t=Ad(t,Rd);var e=Ad(t.firestore,qd),n=jd(e),r=new Hv(e);return Dv(t._query),hd(n,t._query).then((function(n){return new Av(e,r,t,n)}))}(this._delegate)).then((function(t){return new yy(e.firestore,new Av(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ly(e),i=hy(e,(function(e){return new yy(t.firestore,new Av(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Qv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ay.su(this.firestore,e)):this._delegate.withConverter(null))},t}(),vy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new py(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),yy=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new dy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new py(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new vy(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new py(n._firestore,r))}))},t.prototype.isEqual=function(t){return Cv(this._delegate,t._delegate)},t}(),gy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return re(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new uy(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new uy(this.firestore,void 0===t?Ld(this._delegate):Ld(this._delegate,t))}catch(t){throw cy(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ad(t.firestore,qd),r=Ld(t),i=$v(t.converter,e);return Xv(n,[nv(ev(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Iu.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new uy(e.firestore,t)}))},e.prototype.isEqual=function(t){return Md(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ay.su(this.firestore,t)):this._delegate.withConverter(null))},e}(dy);function my(t){return Ad(t,Nd)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var by,wy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(zd.bind.apply(zd,ce([void 0],t)))}return t.documentId=function(){return new t(zs.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=xe(t))instanceof zd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),_y=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new ov("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new rv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sv("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new av("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new uv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Iy={Firestore:ry,GeoPoint:Wd,Timestamp:Fs,Blob:ey,Transaction:oy,WriteBatch:sy,DocumentReference:uy,DocumentSnapshot:fy,Query:dy,QueryDocumentSnapshot:py,QuerySnapshot:yy,CollectionReference:gy,FieldPath:wy,FieldValue:_y,setLogLevel:function(t){var e;e=t,Ts.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Ce("firestore",(function(t){return function(t,e){return new ry(t,new qd(t,e),new ny)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Iy)))})(by=rn),by.registerVersion("@firebase/firestore","2.3.4");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Ty,Ey=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function y(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=y,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),Sy="0.4.27",ky=1e4,Ay="w:0.4.27",xy="FIS_v2",Cy=36e5,Dy=((Ty={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ty["not-registered"]="Firebase Installation is not registered.",Ty["installation-not-found"]="Firebase Installation not found.",Ty["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Ty["app-offline"]="Could not process request. Application offline.",Ty["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Ty),Ny=new we("installations","Installations",Dy);function Ry(t){return t instanceof be&&t.code.includes("request-failed")}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oy(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Py(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Ly(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,Ny.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function My(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Fy(t,e){var n=e.refreshToken,r=My(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n)),r}function Uy(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function Vy(t,e){var n=e.fid;return oe(this,void 0,void 0,(function(){var e,r,i,o,s,a;return se(this,(function(u){switch(u.label){case 0:return e=Oy(t),r=My(t),i={fid:n,authVersion:xy,appId:t.appId,sdkVersion:Ay},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,Uy((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:Py(a.authToken)}];case 3:return[4,Ly("Create Installation",s)];case 4:throw u.sent()}}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qy(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var jy=/^[cdef][\w-]{21}$/;function By(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,ce([],ue(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t);return jy.test(e)?e:""}catch(t){return""}}function $y(t){return t.appName+"!"+t.appId}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ky=new Map;function zy(t,e){var n=$y(t);Gy(n,e),function(t,e){var n=Wy();n&&n.postMessage({key:t,fid:e});Qy()}(n,e)}function Gy(t,e){var n,r,i=Ky.get(t);if(i)try{for(var o=ae(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Hy=null;function Wy(){return!Hy&&"BroadcastChannel"in self&&((Hy=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Gy(t.data.key,t.data.fid)}),Hy}function Qy(){0===Ky.size&&Hy&&(Hy.close(),Hy=null)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xy="firebase-installations-store",Yy=null;function Jy(){return Yy||(Yy=Ey.openDb("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Xy)}}))),Yy}function Zy(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s;return se(this,(function(a){switch(a.label){case 0:return n=$y(t),[4,Jy()];case 1:return r=a.sent(),i=r.transaction(Xy,"readwrite"),[4,(o=i.objectStore(Xy)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||zy(t,e.fid),[2,e]}}))}))}function tg(t){return oe(this,void 0,void 0,(function(){var e,n,r;return se(this,(function(i){switch(i.label){case 0:return e=$y(t),[4,Jy()];case 1:return n=i.sent(),[4,(r=n.transaction(Xy,"readwrite")).objectStore(Xy).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function eg(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a;return se(this,(function(u){switch(u.label){case 0:return n=$y(t),[4,Jy()];case 1:return r=u.sent(),i=r.transaction(Xy,"readwrite"),[4,(o=i.objectStore(Xy)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||zy(t,a.fid),[2,a]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ng(t){return oe(this,void 0,void 0,(function(){var e,n,r;return se(this,(function(i){switch(i.label){case 0:return[4,eg(t,(function(n){var r=function(t){return og(t||{fid:By(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ny.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Vy(t,e)];case 1:return n=i.sent(),[2,Zy(t,n)];case 2:return Ry(r=i.sent())&&409===r.customData.serverCode?[4,tg(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Zy(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:rg(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function rg(t){return oe(this,void 0,void 0,(function(){var e,n,r,i;return se(this,(function(o){switch(o.label){case 0:return[4,ig(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,qy(100)];case 3:return o.sent(),[4,ig(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,ng(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function ig(t){return eg(t,(function(t){if(!t)throw Ny.create("installation-not-found");return og(t)}))}function og(t){return 1===(e=t).registrationStatus&&e.registrationTime+ky<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}function sg(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return oe(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return se(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return Oy(t)+"/"+n+"/authTokens:generate"}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n,e),i=Fy(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:Ay}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,Uy((function(){return fetch(t,a)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,Py(c)];case 3:return[4,Ly("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function ag(t,e){return void 0===e&&(e=!1),oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:return[4,eg(t.appConfig,(function(r){if(!cg(r))throw Ny.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Cy}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return[4,ug(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,qy(100)];case 3:return i.sent(),[4,ug(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ag(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw Ny.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return ie(ie({},t),{authToken:e})}(r);return n=function(t,e){return oe(this,void 0,void 0,(function(){var n,r,i;return se(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,sg(t,e)];case 1:return n=o.sent(),i=ie(ie({},e),{authToken:n}),[4,Zy(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Ry(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,tg(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=ie(ie({},e),{authToken:{requestStatus:0}}),[4,Zy(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ug(t){return eg(t,(function(t){if(!cg(t))throw Ny.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+ky<Date.now()?ie(ie({},t),{authToken:{requestStatus:0}}):t}))}function cg(t){return void 0!==t&&2===t.registrationStatus}function lg(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return[4,ng(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hg(t,e){return oe(this,void 0,void 0,(function(){var n,r,i,o;return se(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Oy(t)+"/"+n}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e),r=Fy(t,e),i={method:"DELETE",headers:r},[4,Uy((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,Ly("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function fg(t,e){var n=t.appConfig;return function(t,e){Wy();var n=$y(t),r=Ky.get(n);r||(r=new Set,Ky.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=$y(t),r=Ky.get(n);r&&(r.delete(e),0===r.size&&Ky.delete(n),Qy())}(n,e)}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pg(t){return Ny.create("missing-app-config-values",{valueName:t})}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.INTERNAL.registerComponent(new Ce("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw pg("App Configuration");if(!t.name)throw pg("App Name");try{for(var r=ae(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw pg(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */return function(t){return oe(this,void 0,void 0,(function(){var e,n,r;return se(this,(function(i){switch(i.label){case 0:return[4,ng(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ag(t).catch(console.error),[2,n.fid]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),oe(this,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return[4,lg(t.appConfig)];case 1:return n.sent(),[4,ag(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return oe(this,void 0,void 0,(function(){var e,n;return se(this,(function(r){switch(r.label){case 0:return[4,eg(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Ny.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Ny.create("app-offline");case 3:return[4,hg(e,n)];case 4:return r.sent(),[4,tg(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return fg(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations",Sy)}(rn);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var dg,vg,yg="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(dg||(dg={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(vg||(vg={}));
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var gg,mg=new Be("@firebase/analytics");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bg(t,e,n,r,i,o){return oe(this,void 0,void 0,(function(){var s,a,u,c;return se(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),mg.error(c),[3,8];case 8:return t(dg.CONFIG,i,o),[2]}}))}))}function wg(t,e,n,r,i){return oe(this,void 0,void 0,(function(){var o,s,a,u,c,l,h,f;return se(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(dg.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),mg.error(f),[3,5];case 5:return[2]}}))}))}function _g(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return oe(this,void 0,void 0,(function(){var a;return se(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==dg.EVENT?[3,2]:[4,wg(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==dg.CONFIG?[3,4]:[4,bg(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(dg.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),mg.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var Ig=((gg={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",gg["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",gg["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",gg["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gg["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gg["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",gg["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",gg["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',gg["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',gg),Tg=new we("analytics","Analytics",Ig),Eg=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Sg(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function kg(t){var e;return oe(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return se(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:Sg(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Tg.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function Ag(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Eg),oe(this,void 0,void 0,(function(){var e,s,a,u,c,l,h;return se(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,xg(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return mg.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,kg(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof be&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return mg.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Ae(o,r.intervalMillis,30):Ae(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),mg.debug("Calling attemptFetch again in "+l+" millis"),[2,Ag(t,h,n,r)];case 7:return[2]}}))}))}function xg(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Tg.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Cg=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dg(t,e,n,r,i,o){return oe(this,void 0,void 0,(function(){var s,a,u,c,l,h,f;return se(this,(function(p){switch(p.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=Eg),oe(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return se(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw Tg.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw Tg.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Cg,setTimeout((function(){return oe(c,void 0,void 0,(function(){return se(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Ag({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&mg.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return mg.error(t)})),e.push(s),a=function(){return oe(this,void 0,void 0,(function(){var t;return se(this,(function(e){switch(e.label){case 0:return ye()?[3,1]:(mg.warn(Tg.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,ge()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),mg.warn(Tg.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(yg))return r}return null}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */()||function(t,e){var n=document.createElement("script");n.src=yg+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(dg.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ng,Rg,Og={},Pg=[],Lg={},Mg="dataLayer",Fg="gtag",Ug=!1;function Vg(t){if(Ug)throw Tg.create("already-initialized");t.dataLayerName&&(Mg=t.dataLayerName),t.gtagName&&(Fg=t.gtagName)}function qg(t,e){!function(){var t=[];if(ve()&&t.push("This is a browser extension environment."),me()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Tg.create("invalid-analytics-context",{errorInfo:e});mg.warn(n.message)}}();var n=t.options.appId;if(!n)throw Tg.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Tg.create("no-api-key");mg.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Og[n])throw Tg.create("already-exists",{id:n});if(!Ug){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Mg);var r=_g(Og,Pg,Lg,Mg,Fg),i=r.wrappedGtag,o=r.gtagCore;Rg=i,Ng=o,Ug=!0}return Og[n]=Dg(t,Pg,Lg,e,Ng,Mg),{app:t,logEvent:function(t,e,r){(
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n,r,i){return oe(this,void 0,void 0,(function(){var o,s;return se(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(dg.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=ie(ie({},r),{send_to:o}),t(dg.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(Rg,Og[n],t,e,r).catch((function(t){return mg.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return oe(this,void 0,void 0,(function(){var i;return se(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(dg.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(dg.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Rg,Og[n],t,e).catch((function(t){return mg.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return oe(this,void 0,void 0,(function(){var i;return se(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(dg.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(dg.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Rg,Og[n],t,e).catch((function(t){return mg.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return oe(this,void 0,void 0,(function(){var i,o,s,a,u;return se(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(dg.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(dg.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Rg,Og[n],t,e).catch((function(t){return mg.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return oe(this,void 0,void 0,(function(){var n;return se(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Og[n],t).catch((function(t){return mg.error(t)}))},INTERNAL:{delete:function(){return delete Og[n],Promise.resolve()}}}}var jg="analytics";function Bg(){return oe(this,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:if(ve())return[2,!1];if(!me())return[2,!1];if(!ye())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ge()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t.INTERNAL.registerComponent(new Ce(jg,(function(t){return qg(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Vg,EventName:vg,isSupported:Bg})),t.INTERNAL.registerComponent(new Ce("analytics-internal",(function(t){try{return{logEvent:t.getProvider(jg).getImmediate().logEvent}}catch(t){throw Tg.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.11")}(rn);var $g="firebasestorage.googleapis.com",Kg=function(t){function e(n,r){var i=t.call(this,zg(n),"Firebase Storage: "+r+" ("+zg(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return re(e,t),e.prototype._codeEquals=function(t){return zg(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(be);function zg(t){return"storage/"+t}function Gg(){return new Kg("unknown","An unknown error occurred, please check the error payload for server response.")}function Hg(){return new Kg("canceled","User canceled the upload/download.")}function Wg(){return new Kg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qg(t){return new Kg("invalid-argument",t)}function Xg(){return new Kg("app-deleted","The Firebase app was deleted.")}function Yg(t){return new Kg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jg(t,e){return new Kg("invalid-format","String does not match format '"+t+"': "+e)}function Zg(t){throw new Kg("internal-error","Internal error: "+t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},em=function(t,e){this.data=t,this.contentType=e||null};function nm(t,e){switch(t){case tm.RAW:return new em(rm(e));case tm.BASE64:case tm.BASE64URL:return new em(im(t,e));case tm.DATA_URL:return new em((n=new om(e)).base64?im(tm.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Jg(tm.DATA_URL,"Malformed data URL.")}return rm(e)}(n.rest),function(t){return new om(t).contentType}(e))}var n;throw Gg()}function rm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function im(t,e){switch(t){case tm.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Jg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case tm.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Jg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw Jg(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var om=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Jg(tm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var sm,am={STATE_CHANGED:"state_changed"},um={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cm(t){switch(t){case"running":case"pausing":case"canceling":return um.RUNNING;case"paused":return um.PAUSED;case"success":return um.SUCCESS;case"canceled":return um.CANCELED;case"error":default:return um.ERROR}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(sm||(sm={}));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var lm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=sm.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=sm.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=sm.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Zg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Zg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Zg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Zg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),hm=function(){function t(){}return t.prototype.createXhrIo=function(){return new lm},t}(),fm=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new Kg("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===$g?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new Kg("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),pm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dm(t){return"string"==typeof t||t instanceof String}function vm(t){return ym()&&t instanceof Blob}function ym(){return"undefined"!=typeof Blob}function gm(t,e,n,r){if(r<e)throw Qg("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Qg("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mm(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function bm(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wm=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return void 0!==t}(a)?i():i(a)}catch(t){o(t)}else null!==s?((r=Gg()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Xg():Hg()):o(r=new Kg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new _m(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,ce([null,t],e));else{var i;a()||o?c.call.apply(c,ce([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new _m(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===sm.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new _m(s,n))}else{var a=n.getErrorCode()===sm.ABORT;e(!1,new _m(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),_m=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Im(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Tm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Im();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ym())return new Blob(t);throw new Kg("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Em=function(){function t(t,e){var n=0,r="";vm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(vm(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ym()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Tm.apply(null,r))}var i=e.map((function(t){return dm(t)?nm(tm.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Sm(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function km(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Am(t,e){return e}var xm=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Am},Cm=null;function Dm(){if(Cm)return Cm;var t=[];t.push(new xm("bucket")),t.push(new xm("generation")),t.push(new xm("metageneration")),t.push(new xm("name","fullPath",!0));var e=new xm("name");e.xform=function(t,e){return function(t){return!dm(t)||t.length<2?t:km(t)}(e)},t.push(e);var n=new xm("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new xm("timeCreated")),t.push(new xm("updated")),t.push(new xm("md5Hash",null,!0)),t.push(new xm("cacheControl",null,!0)),t.push(new xm("contentDisposition",null,!0)),t.push(new xm("contentEncoding",null,!0)),t.push(new xm("contentLanguage",null,!0)),t.push(new xm("contentType",null,!0)),t.push(new xm("metadata","customMetadata",!0)),Cm=t}function Nm(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new fm(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Rm(t,e,n){var r=Sm(e);return null===r?null:Nm(t,r,n)}function Om(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pm(t,e,n){var r=Sm(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new fm(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t._makeStorageReference(new fm(e,l.name)),r.items.push(a)}return r}(t,e,r)}var Lm=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mm(t){if(!t)throw Gg()}function Fm(t,e){return function(n,r){var i=Rm(t,r,e);return Mm(null!==i),i}}function Um(t,e){return function(n,r){var i=Rm(t,r,e);return Mm(null!==i),function(t,e,n){var r=Sm(e);if(null===r)return null;if(!dm(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return mm("/b/"+o(r)+"/o/"+o(i),n)+bm({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Vm(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Kg("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Kg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Kg("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Kg("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function qm(t){var e=Vm(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Kg("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function jm(t,e,n){var r=mm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Lm(r,"GET",Fm(t,n),i);return o.errorHandler=qm(e),o}function Bm(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=mm(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Lm(s,"GET",function(t,e){return function(n,r){var i=Pm(t,e,r);return Mm(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Vm(e),u}function $m(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Km=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function zm(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Mm(!1)}return Mm(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Gm=262144;function Hm(t,e,n,r,i,o,s,a){var u=new Km(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Kg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw Wg();var v=e.maxUploadRetryTime,y=new Lm(n,"POST",(function(t,n){var i,s=zm(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Fm(e,o)(t,n):null,new Km(a,c,"final"===s,i)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=a||null,y.errorHandler=Vm(t),y}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wm=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Xm=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Dm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=$m(e,r,i),a={name:s.fullPath},u=mm(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Om(s,n),h=t.maxUploadRetryTime,f=new Lm(u,"POST",(function(t){var e;zm(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Mm(!1)}return Mm(dm(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=Vm(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Lm(n,"POST",(function(t){var e=zm(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Mm(!1)}n||Mm(!1);var i=Number(n);return Mm(!isNaN(i)),new Km(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Vm(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Gm*this._chunkMultiplier,n=new Km(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=Hm(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Gm*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=jm(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=$m(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Om(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=Em.getBlob(c,r,l);if(null===h)throw Wg();var f={name:u.fullPath},p=mm(o,t.host),d=t.maxUploadRetryTime,v=new Lm(p,"POST",Fm(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=Vm(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Hg(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=cm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Wm(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(cm(this._state)){case um.SUCCESS:Qm(this._resolve.bind(null,this.snapshot))();break;case um.CANCELED:case um.ERROR:Qm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(cm(this._state)){case um.RUNNING:case um.PAUSED:t.next&&Qm(t.next.bind(t,this.snapshot))();break;case um.SUCCESS:t.complete&&Qm(t.complete.bind(t))();break;case um.CANCELED:case um.ERROR:t.error&&Qm(t.error.bind(t,this._error))();break;default:t.error&&Qm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Ym=function(){function t(t,e){this._service=t,this._location=e instanceof fm?e:fm.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new fm(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return km(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new fm(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Yg(t)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jm(t){var e={prefixes:[],items:[]};return Zm(t,e).then((function(){return e}))}function Zm(t,e,n){return oe(this,void 0,void 0,(function(){var r,i,o;return se(this,(function(s){switch(s.label){case 0:return[4,tb(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Zm(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function tb(t,e){return oe(this,void 0,void 0,(function(){var n,r;return se(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&gm("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Bm(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function eb(t,e){return oe(this,void 0,void 0,(function(){var n;return se(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=mm(e.fullServerUrl(),t.host),o=Om(n,r),s=t.maxOperationRetryTime,a=new Lm(i,"PATCH",Fm(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=qm(e),a}(t.storage,t._location,e,Dm()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function nb(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=mm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Lm(r,"GET",Um(t,n),i);return o.errorHandler=qm(e),o}(t.storage,t._location,Dm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Kg("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function rb(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=mm(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Lm(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=qm(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function ib(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new fm(t._location.bucket,n);return new Ym(t.storage,r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ob(t){return/^[A-Za-z]+:\/\//.test(t)}function sb(t,e){if(t instanceof cb){var n=t;if(null==n._bucket)throw new Kg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Ym(n,n._bucket);return null!=e?sb(r,e):r}if(void 0!==e){if(e.includes(".."))throw Qg('`path` param cannot contain ".."');return ib(t,e)}return t}function ab(t,e){if(e&&ob(e)){if(t instanceof cb)return new Ym(t,e);throw Qg("To use ref(service, url), the first argument must be a Storage instance.")}return sb(t,e)}function ub(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:fm.makeFromBucketSpec(n,t)}var cb=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=$g,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fm.makeFromBucketSpec(i,this._host):ub(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=fm.makeFromBucketSpec(this._url,t):this._bucket=ub(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){gm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){gm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return oe(this,void 0,void 0,(function(){var t,e;return se(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return oe(this,void 0,void 0,(function(){var t;return se(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Ym(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new pm(Xg());var i=function(t,e,n,r,i,o){var s=bm(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new wm(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return oe(this,void 0,void 0,(function(){var e,n,r;return se(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lb(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Xm(t,new Em(e),n)}(t=xe(t),e,n)}function hb(t){return function(t){return oe(this,void 0,void 0,(function(){var e;return se(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=jm(t.storage,t._location,Dm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=xe(t))}function fb(t,e){return ab(t=xe(t),e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pb=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),db=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new pb(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new pb(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new pb(t,i,i._ref))}:{next:e.next?function(t){return e.next(new pb(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),vb=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new yb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new yb(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),yb=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return ib(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new db(lb(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=tm.RAW),this._throwIfRoot("putString");var r=nm(e,t),i=ie({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new db(new Xm(this._delegate,new Em(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Jm(t=xe(t))}(this._delegate).then((function(e){return new vb(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return tb(t=xe(t),e)}(this._delegate,t||void 0).then((function(t){return new vb(t,e.storage)}))},t.prototype.getMetadata=function(){return hb(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return eb(t=xe(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return nb(t=xe(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return rb(t=xe(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Yg(t)},t}(),gb=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(ob(t))throw Qg("ref() expected a child path but got a URL, use refFromURL instead.");return new yb(fb(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!ob(t))throw Qg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fm.makeFromUrl(t,this._delegate.host)}catch(t){throw Qg("refFromUrl() expected a valid full URL but got an invalid one.")}return new yb(fb(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mb(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new gb(r,new cb(r,i,o,new hm,n,rn.SDK_VERSION))}!function(t){var e={TaskState:um,TaskEvent:am,StringFormat:tm,Storage:cb,Reference:yb};t.INTERNAL.registerComponent(new Ce("storage",mb,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.3")}(rn);const bb={databaseURL:"https://weazyexe-portfolio.firebaseio.com",messagingSenderId:"2569474271",appId:"1:2569474271:web:e929bedc326b0489e7996a",apiKey:"AIzaSyD1rDOZpMT4Fl7Oi8xCGqMRRJPELV47jtk",authDomain:"weazyexe-portfolio.firebaseapp.com",projectId:"weazyexe-portfolio",storageBucket:"weazyexe-portfolio.appspot.com",measurementId:"G-ZDDF76G42H"};rn.initializeApp(bb);const wb=rn.firestore(),_b=rn.storage(),Ib=rn.analytics(),Tb=async t=>{const e=[];for(const n of t){const t=[];for(const e of n.stack){const n=await _b.ref(`v2/stack/${e}.svg`).getDownloadURL();t.push(n)}e.push({...n,stack:t})}return e},Eb=[];const Sb=(t,e,n)=>({data:t||null,loading:e||!1,error:n||null}),kb={projects:function(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!Eb.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),Eb.push(n,e)}if(t){for(let t=0;t<Eb.length;t+=2)Eb[t][0](Eb[t+1]);Eb.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.push(u),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}(Sb())};var Ab="PROJECT_CLICK",xb="PROJECTS_LOADING_ERROR";function Cb(t){let e,n,r,i,o,s,a,u,c;return n=new yt({}),i=new Et({}),s=new Xt({props:{projectsStoreData:t[0],onProjectClick:t[1]}}),u=new ee({}),{c(){e=b("div"),J(n.$$.fragment),r=_(),J(i.$$.fragment),o=_(),J(s.$$.fragment),a=_(),J(u.$$.fragment),I(e,"class","container svelte-tff18p")},m(t,l){y(t,e,l),Z(n,e,null),v(e,r),Z(i,e,null),v(e,o),Z(s,e,null),v(e,a),Z(u,e,null),c=!0},p(t,[e]){const n={};1&e&&(n.projectsStoreData=t[0]),s.$set(n)},i(t){c||(W(n.$$.fragment,t),W(i.$$.fragment,t),W(s.$$.fragment,t),W(u.$$.fragment,t),c=!0)},o(t){Q(n.$$.fragment,t),Q(i.$$.fragment,t),Q(s.$$.fragment,t),Q(u.$$.fragment,t),c=!1},d(t){t&&g(e),tt(n),tt(i),tt(s),tt(u)}}}function Db(t,e,n){let r;kb.projects.subscribe((t=>{0!==t.length&&n(0,r=t)}));return(async()=>{try{kb.projects.set(Sb(null,!0));const t=(await(async()=>{const t=(await wb.collection("v2/data/projects").get()).docs.map((t=>t.data()));return await Tb(t)})()).sort(((t,e)=>t.sortWeight-e.sortWeight));kb.projects.set(Sb(t,!1))}catch(e){kb.projects.set(Sb(null,!1,e)),t=e,Ib.logEvent(xb,{error:t})}var t})(),[r,t=>{(t=>{Ib.logEvent(Ab,{projectId:t.id,projectTitle:t.title})})(t)}]}class Nb extends rt{constructor(t){super(),nt(this,t,Db,Cb,s,{})}}function Rb(e){let n,r,i,o,s;return r=new Nb({}),o=new st({}),{c(){n=b("div"),J(r.$$.fragment),i=_(),J(o.$$.fragment)},m(t,e){y(t,n,e),Z(r,n,null),v(n,i),Z(o,n,null),s=!0},p:t,i(t){s||(W(r.$$.fragment,t),W(o.$$.fragment,t),s=!0)},o(t){Q(r.$$.fragment,t),Q(o.$$.fragment,t),s=!1},d(t){t&&g(n),tt(r),tt(o)}}}return new class extends rt{constructor(t){super(),nt(this,t,null,Rb,s,{})}}({target:document.getElementById("root"),props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
